function fnNTlabGUI()
%
% Copyright (c) 2015 Joshua Fuller-Deets, Massachusetts Institute of Technology.
% This file is a part of a free software. you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation (see GPL.txt)


% Note, always add controllers as fields to g_strctParadigm.m_strctControllers
% This way, they are automatically removed once we switch to another
% paradigm

% contains all Matlab GUI controls for Hand Mapper paradigm
% add new gui controls to this function
% for stimuli specific controls, see handling of strctPlainBarControllers, etc, in order
% to have multiple stimuli panels in the same gui location, and have the currently active displayed
% relevant sections of callback function can be found by following the callback
% the callback case for each gui handle can be found by searching the callback function
% for the string included in the gui handle creation in this document

global g_strctParadigm g_strctPTB g_handles g_strctStimulusServer g_strctGUIParams g_strctRealTimeStatServer

%dbstop if warning
%warning ('Sivas warning')

iOffset = 400; %pixel off set from something

[hParadigmPanel, iPanelHeight, iPanelWidth] = fnCreateParadigmPanel();
strctControllers.m_hPanel = hParadigmPanel;
strctControllers.m_iPanelHeight = iPanelHeight;
strctControllers.m_iPanelWidth = iPanelWidth;

iNumButtonsInRow = 3;
iButtonWidth = iPanelWidth / iNumButtonsInRow - 20;


[strctDesignControllers.m_hPanel, strctDesignControllers.m_iPanelHeight,strctDesignControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Design');


[strctStatisticsControllers.m_hPanel, strctStatisticsControllers.m_iPanelHeight,strctStatisticsControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Statistics Parameters');


[strctJuiceControllers.m_hPanel, strctJuiceControllers.m_iPanelHeight,strctJuiceControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Juice Parameters');

[strctPlainBarControllers.m_hPanel, strctPlainBarControllers.m_iPanelHeight,strctPlainBarControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Plain Bar Parameters');
	
[strctMovingBarControllers.m_hPanel, strctMovingBarControllers.m_iPanelHeight,strctMovingBarControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Moving Bar Parameters');

%Felix added:
[strctFivedotControllers.m_hPanel, strctFivedotControllers.m_iPanelHeight,strctFivedotControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Fivedot Parameters');

[strctDualstimControllers.m_hPanel, strctDualstimControllers.m_iPanelHeight,strctDualstimControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Dualstim Parameters');

[strctCIHandmapperControllers.m_hPanel, strctCIHandmapperControllers.m_iPanelHeight,strctCIHandmapperControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'CIHandmapper Parameters');

[strctGroundtruthControllers.m_hPanel, strctGroundtruthControllers.m_iPanelHeight,strctGroundtruthControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Groundtruth Parameters');

[strctDensenoiseControllers.m_hPanel, strctDensenoiseControllers.m_iPanelHeight,strctDensenoiseControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Densenoise Parameters');

[strctOneDnoiseControllers.m_hPanel, strctOneDnoiseControllers.m_iPanelHeight,strctOneDnoiseControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'OneDnoise Parameters');

[strctDiscProbeControllers.m_hPanel, strctDiscProbeControllers.m_iPanelHeight,strctDiscProbeControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Disc Probe Parameters');

% Siva comment: create parent panel for two bar GUI (GO TO line 692 for % creation of sliding bars)
[strctTwoBarControllers.m_hPanel, strctTwoBarControllers.m_iPanelHeight,strctTwoBarControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Two Bar Parameters');
	
% Siva added start here: create many bar GUI
[strctManyBarControllers.m_hPanel, strctManyBarControllers.m_iPanelHeight,strctManyBarControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Many Bar Parameters');
% Siva added end here: create many bar GUI

[strctGaborControllers.m_hPanel, strctGaborControllers.m_iPanelHeight,strctGaborControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Gabor Parameters');

[strctDiscControllers.m_hPanel, strctDiscControllers.m_iPanelHeight,strctDiscControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Disc Parameters');
	

[strctColorControllers.m_hPanel, strctColorControllers.m_iPanelHeight,strctColorControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Color Parameters');

[strctImageControllers.m_hPanel, strctImageControllers.m_iPanelHeight,strctImageControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Image Parameters');	

[strctMovieControllers.m_hPanel, strctMovieControllers.m_iPanelHeight,strctMovieControllers.m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(hParadigmPanel,50,iPanelHeight-5,'Movie Parameters');	
	


 strctControllers.m_hSetDesignPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Design',...
      'Position', [5 iPanelHeight-40 50 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DesignPanel'');']);

 strctControllers.m_hSetStatisticsPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Stats',...
      'Position', [60 iPanelHeight-40 50 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''StatisticsPanel'');']);
    
 strctControllers.m_hSetJuicePanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Juice',...
      'Position', [110+5 iPanelHeight-40 50 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''JuicePanel'');']);

  strctControllers.m_hSetColorControlPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Color Function',...
      'Position', [165 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ColorPanel'');']);
	  
strctControllers.m_hSetPlainBarPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'PlainBar Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PlainBarPanel'');']);
g_strctParadigm.m_iLastStimuliControllerButtonIndex = 1;
	  
strctControllers.m_hSetMovingBarPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'MovingBar Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''MovingBarPanel'');']);
set(strctControllers.m_hSetMovingBarPanel,'enable','off');	  
set(strctControllers.m_hSetMovingBarPanel,'visible','off');	

strctControllers.m_hSetFivedotPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Fivedot Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''FivedotPanel'');']);
set(strctControllers.m_hSetFivedotPanel,'enable','off');	  
set(strctControllers.m_hSetFivedotPanel,'visible','off');	

strctControllers.m_hSetDualstimPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Dualstim Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DualstimPanel'');']);
set(strctControllers.m_hSetDualstimPanel,'enable','off');	  
set(strctControllers.m_hSetDualstimPanel,'visible','off');	

strctControllers.m_hSetCIHandmapperPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'CIHandmapper Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CIHandmapperPanel'');']);
set(strctControllers.m_hSetCIHandmapperPanel,'enable','off');	  
set(strctControllers.m_hSetCIHandmapperPanel,'visible','off');

strctControllers.m_hSetGroundtruthPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Groundtruth Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''GroundtruthPanel'');']);
set(strctControllers.m_hSetGroundtruthPanel,'enable','off');	  
set(strctControllers.m_hSetGroundtruthPanel,'visible','off');

strctControllers.m_hSetDensenoisePanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Densenoise Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DensenoisePanel'');']);
set(strctControllers.m_hSetDensenoisePanel,'enable','off');	  
set(strctControllers.m_hSetDensenoisePanel,'visible','off');

strctControllers.m_hSetOneDnoisePanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'OneDnoise Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''OneDnoisePanel'');']);
set(strctControllers.m_hSetOneDnoisePanel,'enable','off');	  
set(strctControllers.m_hSetOneDnoisePanel,'visible','off');

strctControllers.m_hSetDiscProbePanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'DiscProbe Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DiscProbePanel'');']);
set(strctControllers.m_hSetDiscProbePanel,'enable','off');
set(strctControllers.m_hSetDiscProbePanel,'visible','off');	

strctControllers.m_hSetTwoBarPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Bar Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''TwoBarPanel'');']);
set(strctControllers.m_hSetTwoBarPanel,'enable','off');	  
set(strctControllers.m_hSetTwoBarPanel,'visible','off');	

%Siva added many bar panel starts here
strctControllers.m_hSetManyBarPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Bar Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ManyBarPanel'');']);
set(strctControllers.m_hSetManyBarPanel,'enable','off');	  
set(strctControllers.m_hSetManyBarPanel,'visible','off');
%Siva added many bar panel ends here

strctControllers.m_hSetGaborPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Gabor Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''GaborPanel'');']);
set(strctControllers.m_hSetGaborPanel,'enable','off');
set(strctControllers.m_hSetGaborPanel,'visible','off');	
	  
strctControllers.m_hSetDiscPanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Disc Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DiscPanel'');']);
set(strctControllers.m_hSetDiscPanel,'enable','off');
set(strctControllers.m_hSetDiscPanel,'visible','off');	
	  
strctControllers.m_hSetImagePanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Image Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ImagePanel'');']);
set(strctControllers.m_hSetImagePanel,'enable','off');
set(strctControllers.m_hSetImagePanel,'visible','off');	
	 
strctControllers.m_hSetMoviePanel = uicontrol('Parent',hParadigmPanel, 'Style', 'pushbutton', 'String', 'Movie Variables',...
      'Position', [220 iPanelHeight-40 55 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''MoviePanel'');']);
set(strctControllers.m_hSetMoviePanel,'enable','off');
set(strctControllers.m_hSetMoviePanel,'visible','off');		 
	  
strctControllers.m_hSubPanels = [strctDesignControllers.m_hPanel;...
								strctStatisticsControllers.m_hPanel;...
								strctJuiceControllers.m_hPanel;...
								strctColorControllers.m_hPanel;...
								strctPlainBarControllers.m_hPanel;...
								strctMovingBarControllers.m_hPanel;...
                                strctGaborControllers.m_hPanel;...
								strctDiscControllers.m_hPanel;...
								strctImageControllers.m_hPanel;...
								strctMovieControllers.m_hPanel;...
								strctManyBarControllers.m_hPanel;....
								strctTwoBarControllers.m_hPanel;...
								strctFivedotControllers.m_hPanel;...
								strctDualstimControllers.m_hPanel;...
								strctCIHandmapperControllers.m_hPanel;...
								strctGroundtruthControllers.m_hPanel;...
								strctDensenoiseControllers.m_hPanel;...
								strctOneDnoiseControllers.m_hPanel;...
                                strctDiscProbeControllers.m_hPanel] ;% Siva added for Many Bars
	  
strctControllers.m_ahStimuliControllerButtons = [ strctControllers.m_hSetDesignPanel,...
								strctControllers.m_hSetStatisticsPanel,...
								strctControllers.m_hSetJuicePanel,...
								strctControllers.m_hSetColorControlPanel ,...
								strctControllers.m_hSetPlainBarPanel,...
								strctControllers.m_hSetMovingBarPanel,...
								strctControllers.m_hSetGaborPanel,...
								strctControllers.m_hSetDiscPanel,...
								strctControllers.m_hSetImagePanel,...
								strctControllers.m_hSetMoviePanel,...
								strctControllers.m_hSetManyBarPanel,...
								strctControllers.m_hSetTwoBarPanel, ...
								strctControllers.m_hSetFivedotPanel, ...
								strctControllers.m_hSetDualstimPanel, ...
								strctControllers.m_hSetCIHandmapperPanel, ...
								strctControllers.m_hSetGroundtruthPanel, ...
								strctControllers.m_hSetDensenoisePanel, ...
								strctControllers.m_hSetOneDnoisePanel, ...
                                strctControllers.m_hSetDiscProbePanel];

% allows the callback function to 'find' the appropriate panel and disable the others
% *MUST* be in the same order as the structure strctControllers.m_ahStimuliControllerButtons
strctControllers.m_ahStimuliControllerButtonsStrLookup = {'DesignPanel',  'StatisticsPanel','JuicePanel', 'ColorControlPanel','PlainBarPanel','MovingBarPanel',...
														'GaborPanel','DiscPanel',...
															'ImagePanel','MoviePanel','ManyBarPanel', 'TwoBarPanel','FivedotPanel','DualstimPanel','CIHandmapperPanel','GroundtruthPanel','DensenoisePanel','OneDnoisePanel','DiscProbePanel'};


%% Siva added code for creating many bars starts here
%CREATE FIVE PANELS TO SET THE BAR PAREMATERS for many bars

% [strctBarAllControllers.m_hPanel, strctBarAllControllers.m_iPanelHeight,strctBarAllControllers.m_iPanelWidth] = ...
%     fnCreateParadigmSubPanel(hParadigmPanel,100,iPanelHeight-5,'All Bars');
% 
% [strctBarOneControllers.m_hPanel, strctBarOneControllers.m_iPanelHeight,strctBarOneControllers.m_iPanelWidth] = ...
%     fnCreateParadigmSubPanel(hParadigmPanel,100,iPanelHeight-5,'Bar One');
% 
% [strctBarTwoControllers.m_hPanel, strctBarTwoControllers.m_iPanelHeight,strctBarTwoControllers.m_iPanelWidth] = ...
%     fnCreateParadigmSubPanel(hParadigmPanel,100,iPanelHeight-5,'Bar Two');
% 
% [strctBarThreeControllers.m_hPanel, strctBarThreeControllers.m_iPanelHeight,strctBarThreeControllers.m_iPanelWidth] = ...
%     fnCreateParadigmSubPanel(hParadigmPanel,100,iPanelHeight-5,'Bar Three');
% 	
% [strctBarFourControllers.m_hPanel, strctBarFourControllers.m_iPanelHeight,strctBarFourControllers.m_iPanelWidth] = ...
%     fnCreateParadigmSubPanel(hParadigmPanel,100,iPanelHeight-5,'Bar Four');
% 
% strctManyBarControllers.m_hSubPanels = [strctBarAllControllers.m_hPanel;...
%                                         strctBarOneControllers.m_hPanel;...
%                                         strctBarTwoControllers.m_hPanel;...
%                                         strctBarThreeControllers.m_hPanel;...
%                                         strctBarFourControllers.m_hPanel;];

% Siva added code for creating many bars ends here

%% Siva added code for creating many bars starts here
% ADD FIVE BUTTONS TO OPEN THE RESPECTIVE SUB PANELS TO SET THE RELEVANT BAR PARAMETERS

% strctControllers.m_hSetSDesignPanel = uicontrol('Parent',strctManyBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Bar All',...
%       'Position', [5 iPanelHeight-100 60 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BarOne'');']);
%   
% strctControllers.m_hSetSDesignPanel = uicontrol('Parent',strctManyBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Bar1',...
%       'Position', [65 iPanelHeight-100 60 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BarOne'');']);
% 
%  strctControllers.m_hSetStatisticsPanel = uicontrol('Parent',strctManyBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Bar2',...
%       'Position', [125 iPanelHeight-100 60 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BarTwo'');']);
%     
%  strctControllers.m_hSetJuicePanel = uicontrol('Parent',strctManyBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Bar3',...
%       'Position', [185 iPanelHeight-100 60 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BarThree'');']);
% 
%   strctControllers.m_hSetColorControlPanel = uicontrol('Parent',strctManyBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Bar4',...
%       'Position', [245 iPanelHeight-100 60 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BarFour'');']);


numberOfBars=fnTsGetVar('g_strctParadigm','numberOfBarsManyBar'); %  maximum number of bars allowed

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*0, ...
%     'Gaze Time(ms):', 'GazeTimeMS',30, 10000, [1, 50], fnTsGetVar('g_strctParadigm','GazeTimeMS'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*0, ...
    'Num Bars', 'ManyBarNumberOfBarsSelected', ...
    0, numberOfBars, [1, 1], fnTsGetVar('g_strctParadigm','ManyBarNumberOfBarsSelected'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*1, ...
    'Bar Select', 'ManyBarSelectedBar', ...
    0, numberOfBars, [1, 1], fnTsGetVar('g_strctParadigm','ManyBarSelectedBar'));

% % % % % strctManyBarControllers = fnAddTextSliderEditComboSmallWithCallback2(strctManyBarControllers,strctManyBarControllers.m_hPanel, 40+30*0, ...
% % % % %     'Num Bars', 'ManyBarNumberOfBars', ...
% % % % %     0, numberOfBars, [1, 1], fnTsGetVar('g_strctParadigm','ManyBarNumberOfBars'));
% % % % % 	
% % % % % strctManyBarControllers = fnAddTextSliderEditComboSmallWithCallback2(strctManyBarControllers,strctManyBarControllers.m_hPanel, 40+30*1, ...
% % % % %     'Bar Select', 'ManyBarSelectedBar', ...
% % % % %     0, numberOfBars, [1, 1], fnTsGetVar('g_strctParadigm','ManyBarSelectedBar'));



% Siva added code for creating many bars ends here

%% Siva added code for creating many bars starts here
% CREATE THE SLIDERS AND OTHER GUI FOR ALL BARS TOGETHER IN MANY BAR

for (numBar=0:1:numberOfBars)  %Create GUI for each bars
    
            %create a panel for each bar and put all the gui controllers inside
    [strctManyBarSubControllers(numBar+1).m_hPanel, strctManyBarSubControllers(numBar+1).m_iPanelHeight,strctManyBarSubControllers(numBar+1).m_iPanelWidth] = ...
    fnCreateParadigmSubPanel(strctManyBarControllers.m_hPanel,80,iPanelHeight-5-80,'Many Bar Parameters');
% strctManyBarControllers.m_hPanel

%     if numBar==0
% % % % %         strctManyBarControllers = fnAddTextSliderEditComboSmallWithCallback2(strctManyBarControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*2, ...
% % % % %             ['Bar All Width'], ['ManyBarWidthBarAll' num2str(numBar)], ...
% % % % %             1, 200, [1, 10], fnTsGetVar('g_strctParadigm','ManyBarWidthBarAll'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*0, ...
%     'Gaze Time(ms):', 'GazeTimeMS',30, 10000, [1, 50], fnTsGetVar('g_strctParadigm','GazeTimeMS'));

%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers(numBar+1).m_hPanel, 40+30*2, ...
%             ['Bar All Width'], ['ManyBarWidthBarAll' ], ...%num2str(numBar)
%             1, 200, [1, 10], fnTsGetVar('g_strctParadigm','ManyBarWidthBarAll'));

    if (numBar==0)     %0 meand the same variable is used to initialise all the bars
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*0, ...
            ['Bar All Width'], ['ManyBarWidthBar', num2str(numBar) ], ...%num2str(numBar)
            1, 200, [1, 10], fnTsGetVar('g_strctParadigm',['ManyBarWidthBar', num2str(numBar) ]));

        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*1, ...
            ['Bar All Length'], ['ManyBarLengthBar', num2str(numBar) ], ...
            1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,['ManyBarLengthBar', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*2, ...
            ['Bar All Orientation'], ['ManyBarOrientationBar', num2str(numBar) ], ...
            0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarOrientationBar', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*3, ...
            ['Bar All Blur'], ['ManyBarBlurStepsBar', num2str(numBar) ], ...
            0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarBlurStepsBar', num2str(numBar) ]));
    else
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*0, ...
            ['Bar ' num2str(numBar) ' Width'], ['ManyBarWidthBar', num2str(numBar) ], ...%num2str(numBar)
            1, 200, [1, 10], fnTsGetVar('g_strctParadigm',['ManyBarWidthBar', num2str(numBar) ]));

        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*1, ...
            ['Bar ' num2str(numBar) ' Length'], ['ManyBarLengthBar', num2str(numBar) ], ...
            1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,['ManyBarLengthBar', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*2, ...
            ['Bar ' num2str(numBar) ' Orientation'], ['ManyBarOrientationBar', num2str(numBar) ], ...
            0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarOrientationBar', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*3, ...
            ['Bar ' num2str(numBar) ' Blur'], ['ManyBarBlurStepsBar', num2str(numBar) ], ...
            0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarBlurStepsBar', num2str(numBar) ]));
    end
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*4, ...
            'Range', ['ManyBarMoveDistance', num2str(numBar) ], ...
            0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,['ManyBarMoveDistance', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*5, ...
            'Stimulus Area', 'ManyBarStimulusArea', ...
            0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusArea'));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*6, ...
            'Stimulus On Time', 'ManyBarStimulusOnTime', ...
            10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusOnTime'));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*7, ...
            'Stimulus Off Time', 'ManyBarStimulusOffTime', ...
            10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusOffTime'));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*8, ...
            'Onset Delay', ['ManyBarStimulusOnsetDelay', num2str(numBar) ], ...
            10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarStimulusOnsetDelay', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*9, ...
            'Minimum Offset', ['ManyBarMinOffset', num2str(numBar)], ...
            10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarMinOffset', num2str(numBar)]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*10, ...
            'Maximum Offset', ['ManyBarMaxOffset', num2str(numBar)], ...
            10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarMaxOffset', num2str(numBar)]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*11, ...
            'Bar Red', ['ManyBarStimulusRed', num2str(numBar) ], ...
            0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarStimulusRed', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*12, ...
            'Bar Green', ['ManyBarStimulusGreen', num2str(numBar) ], ...
            0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,['ManyBarStimulusGreen', num2str(numBar) ]));
        
        strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*13, ...
            'Bar Blue', ['ManyBarStimulusBlue', num2str(numBar) ], ...
            0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,['ManyBarStimulusBlue', num2str(numBar) ]));


%     else
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*2, ...
%             ['Bar ' num2str(numBar) ' Width'], ['ManyBarWidthBarAll' ], ...%num2str(numBar)
%             1, 200, [1, 10], fnTsGetVar('g_strctParadigm','ManyBarWidthBarAll'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*3, ...
%             ['Bar ' num2str(numBar) ' Length' ], ['ManyBarLengthBarAll' num2str(numBar)], ...
%             1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'ManyBarLengthBarAll'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*4, ...
%             ['Bar ' num2str(numBar) ' Orientation'], ['ManyBarOrientationBarAll' num2str(numBar)], ...
%             0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarOrientationBarAll'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*5, ...
%             ['Bar ' num2str(numBar) ' Blur'], ['ManyBarBlurStepsBarAll' num2str(numBar)], ...
%             0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarBlurStepsBarAll'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*6, ...
%             ['Range ' num2str(numBar)], ['ManyBarMoveDistance' num2str(numBar)], ...
%             0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'ManyBarMoveDistance'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*7, ...
%             'Stimulus Area', ['ManyBarStimulusArea' num2str(numBar)], ...
%             0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusArea'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*8, ...
%             'Stimulus On Time', ['ManyBarStimulusOnTime' num2str(numBar)], ...
%             10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusOnTime'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*9, ...
%             'Stimulus Off Time', ['ManyBarStimulusOffTime' num2str(numBar)], ...
%             10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusOffTime'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*10, ...
%             ['Onset Delay ' num2str(numBar)], ['ManyBarStimulusOnsetDelay' num2str(numBar)], ...
%             10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusOnsetDelay'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*11, ...
%             ['Minimum Offset ' num2str(numBar)], ['ManyBarMinOffset' num2str(numBar)], ...
%             10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarMinOffset'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*12, ...
%             ['Maximum Offset ' num2str(numBar)], ['ManyBarMaxOffset' num2str(numBar)], ...
%             10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarMaxOffset'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*13, ...
%             ['Bar Red' num2str(numBar)], ['ManyBarStimulusRed' num2str(numBar)], ...
%             0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusRed'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*14, ...
%             ['Bar Green ' num2str(numBar)], ['ManyBarStimulusGreen' num2str(numBar)], ...
%             0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusGreen'));
%         
%         strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarSubControllers(numBar+1).m_hPanel, 40+30*15, ...
%             ['Bar Blue ' num2str(numBar)], ['ManyBarStimulusBlue' num2str(numBar)], ...
%             0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ManyBarStimulusBlue'));
%     end
    
   %set(strctManyBarSubControllers(numBar+1).m_hPanel,'enable','off');	  
    set(strctManyBarSubControllers(numBar+1).m_hPanel,'visible','off');	
end

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*16, ...
    'Background Red', 'ManyBarBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ManyBarBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*17, ...
    'Background Green', 'ManyBarBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ManyBarBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*18, ...
    'Background Blue', 'ManyBarBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ManyBarBackgroundBlue'));
	%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctManyBarControllers.m_hPanel, 40+30*19, ...
    'Stimulus Color', ['ManyBarStimulusPresetColor', num2str(numBar)], ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,['ManyBarStimulusPresetColor', num2str(numBar)]));
%}
strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctManyBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	  
strctControllers.m_hSetRandomStimulusPosition = uicontrol('Parent',strctManyBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Position','value',...
	g_strctParadigm.m_bRandomStimulusPosition,...
    'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusLocation'');']);
	
strctControllers.m_hSetRandomStimulusOrientation = uicontrol('Parent',strctManyBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Orientation','value',...
	g_strctParadigm.m_bRandomStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusOrientation'');']);	

strctControllers.m_hSetCycleStimulusOrientation = uicontrol('Parent',strctManyBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Orientation','value',...
	g_strctParadigm.m_bCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-360 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleStimulusOrientation'');']);	
	
strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctManyBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Orientation','value',...
	g_strctParadigm.m_bReverseCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseCycleStimulusOrientation'');']);	

strctControllers.m_hSetDifferentColorsForDifferentStim = uicontrol('Parent',strctManyBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Different Colors','value',...
	g_strctParadigm.m_strct2BarStimParams.m_bDifferentColorsForDifferentBars,...
    'Position', [5 iPanelHeight-iOffset-400 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetDifferentColorsForDifferentStim'');']);	
		
		
		
		
strctManyBarControllers.strctManyBarSubControllers = strctManyBarSubControllers;
strctControllers.strctManyBarControllers = strctManyBarControllers;
set(strctControllers.strctManyBarControllers.m_hPanel,'visible','off');

% Siva added code for creating many bars ends here

  %% Juice Controllers
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*0, ...
    'Gaze Time(ms):', 'GazeTimeMS',30, 10000, [1, 50], fnTsGetVar('g_strctParadigm','GazeTimeMS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*1, ...
    'Gaze Time (Low):', 'GazeTimeLowMS', 30, 10000, [1, 50], fnTsGetVar('g_strctParadigm','GazeTimeLowMS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctJuiceControllers.m_hPanel,40+30*2, ...
    'Gaze area (pix):', 'GazeBoxPix', 0, 300, [1, 50], fnTsGetVar('g_strctParadigm','GazeBoxPix'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*3, ...
    'Juice Time (ms):', 'JuiceTimeMS',25, 100, [1, 5], fnTsGetVar('g_strctParadigm','JuiceTimeMS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*4, ...
    'Juice Time (High):', 'JuiceTimeHighMS', 25, 100, [1, 5], fnTsGetVar('g_strctParadigm','JuiceTimeHighMS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*5, ...
    'Blink Time (ms):', 'BlinkTimeMS', 10, 500, [1, 50], fnTsGetVar('g_strctParadigm','BlinkTimeMS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctJuiceControllers.m_hPanel,40+30*6, ...
    'Positive Increment (%):', 'PositiveIncrement', 0, 100, [1, 5], fnTsGetVar('g_strctParadigm','PositiveIncrement'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctJuiceControllers.m_hPanel, 40+30*7, ...
    'Fixation Size (pix):', 'FixationSizePix',0, 300, [1, 50], fnTsGetVar('g_strctParadigm','FixationSizePix'));
  
set(strctJuiceControllers.m_hPanel,'visible','off');
%% Stimulus Controllers
%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*0, ...
    'Fixation Size (pix):', 'FixationSizePix',0, 300, [1, 50], fnTsGetVar('g_strctParadigm','FixationSizePix'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*1, ...
    'Stimulus ON Time (ms):', 'StimulusON_MS',g_strctStimulusServer.m_fRefreshRateMS, ...
    500*g_strctStimulusServer.m_fRefreshRateMS, ...
    [g_strctStimulusServer.m_fRefreshRateMS, g_strctStimulusServer.m_fRefreshRateMS*5],...
    fnTsGetVar('g_strctParadigm','StimulusON_MS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*2, ...
    'Stimulus OFF Time (ms):', 'StimulusOFF_MS',g_strctStimulusServer.m_fRefreshRateMS, ...
    500*g_strctStimulusServer.m_fRefreshRateMS, [g_strctStimulusServer.m_fRefreshRateMS, g_strctStimulusServer.m_fRefreshRateMS*5], ...
    fnTsGetVar('g_strctParadigm' ,'StimulusOFF_MS'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*3, ...
    'Stimulus size (pix):', 'StimulusSizePix',0, 700,  [1, 50], fnTsGetVar('g_strctParadigm','StimulusSizePix'));
%}
	

%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*3, ...
    'Raster X:', 'rasterPlotX',0, 700,  [1, 50], fnTsGetVar('g_strctParadigm','rasterPlotX'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*4, ...
    'Raster Y:', 'rasterPlotY',0, 700,  [1, 50], fnTsGetVar('g_strctParadigm','rasterPlotY'));
	%}

%{	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*0, ...
    'Trials For Plotting', 'TrialsForPlotting', 0, 200, [1, 5], fnTsGetVar('g_strctParadigm','TrialsForPlotting'));
	%}
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*0, ...
    'Post Trial Window MS', 'PostTrialPlottingWindow', 0, 1000, [1, 5], fnTsGetVar('g_strctParadigm','PostTrialPlottingWindow'));	
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctStatisticsControllers.m_hPanel, 40+30*1, ...
    'Pre Trial Window MS', 'PreTrialPlottingWindow', 0, 1000, [1, 5], fnTsGetVar('g_strctParadigm','PreTrialPlottingWindow'));	
	%{
strctControllers.m_hRasterPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'checkbox', 'String', 'Raster Plot','value',  g_strctParadigm.m_bRasterPlot,...
     'Position', [5 iPanelHeight-iOffset-120 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ToggleRasterPlot'');']);	 

strctControllers.m_hHeatPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'checkbox', 'String', 'Heat Plot','value',  g_strctParadigm.m_bHeatPlot,...
     'Position', [5 iPanelHeight-iOffset-120 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ToggleHeatPlot'');']);	 	 
	
strctControllers.m_hPolarPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'checkbox', 'String', 'Polar Plot','value',  g_strctParadigm.m_bPolarPlot,...
     'Position', [5 iPanelHeight-iOffset-160 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''TogglePolarPlot'');']);
	 %}
%strctControllers.m_hSetDynamicTrialMode= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'checkbox', 'String', 'Set Dynamic Trial Stats','value',  g_strctParadigm.m_bSetDynamicTrialMode,...
%     'Position', [5 iPanelHeight-iOffset-160 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetDynamicTrialMode'');']);

strctControllers.m_hTogglePSTHPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle psth plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-200 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''togglepsthplot'');']);

strctControllers.m_hClearColorBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Clear',...
     'Position', [2*iButtonWidth-40 iPanelHeight-200 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushcolorspikebuffer'');']);

strctControllers.m_hToggleOrientationPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle orientation polar',...
     'Position', [2*iButtonWidth-140 iPanelHeight-250 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''toggleorientationpolar'');']);
	 
strctControllers.m_hClearOrientationBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'clear ',...
     'Position', [2*iButtonWidth-40 iPanelHeight-250 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushorientationspikebuffer'');']);

strctControllers.m_hTogglePositionPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle position plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-300 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''togglepositionplot'');']);
	 
strctControllers.m_hClearPositionBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'clear ',...
     'Position', [2*iButtonWidth-40 iPanelHeight-300 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushpositionspikebuffer'');']);
	 

strctControllers.m_hToggleISIPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle isi plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-350 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''toggleisiplot'');']);

strctControllers.m_hClearISIBuffer= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Clear',...
     'Position', [2*iButtonWidth-40 iPanelHeight-350 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushisispikebuffer'');']);
	 
strctControllers.m_hToggleVariableWidthPlot = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle Width plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-400 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''togglewidthplot'');']);
	 
strctControllers.m_hClearVariableWidthBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Clear',...
     'Position', [2*iButtonWidth-40 iPanelHeight-400 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushwidthspikebuffer'');']);
	 
strctControllers.m_hToggleVariableLengthPlot = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle Length plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-450 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''togglelengthplot'');']);
	 
strctControllers.m_hClearVariableLengthBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Clear',...
     'Position', [2*iButtonWidth-40 iPanelHeight-450 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushlengthspikebuffer'');']);
	 
strctControllers.m_hToggleVariableSpeedPlot = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle Speed plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-500 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''togglespeedplot'');']);
	 
strctControllers.m_hClearVariableSpeedBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Clear',...
     'Position', [2*iButtonWidth-40 iPanelHeight-500 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushspeedspikebuffer'');']);
	 
strctControllers.m_hToggleImagePlot = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Toggle Image plot',...
     'Position', [2*iButtonWidth-140 iPanelHeight-550 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''toggleimageplot'');']);

strctControllers.m_hClearImageSpikeBuffer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Clear',...
     'Position', [2*iButtonWidth-40 iPanelHeight-550 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''flushimagespikebuffer'');']);	 
	 
	 
strctControllers.m_hPrintStatFigure = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Print Stat figure',...
     'Position', [2*iButtonWidth-140 iPanelHeight-800 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''printstatfigure'');']);

strctControllers.m_hDebugStatServer = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Debug Server',...
     'Position', [2*iButtonWidth-40 iPanelHeight-800 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''debugstatserver'');']);

	 



	 
	 
%{
strctControllers.m_hTogglePositionPlot= uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'record temp',...
     'Position', [2*iButtonWidth+40 iPanelHeight-550 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''StartRecording'');']);	
	%} 
 %strctControllers.m_hSetNewBackground = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Back Color',...
 %    'Position', [2*iButtonWidth+40 iPanelHeight-250 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BackgroundColor'');']);

 %{
strctControllers.m_hFixationSpotChange = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Free Fix Pos',...
     'Position',  [iButtonWidth+20 iPanelHeight-250 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''FixationSpot'');']);

	
strctControllers.m_hStimulusPosChange = uicontrol('Parent',strctStatisticsControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Free Stimulus Pos',...
     'Position', [5 iPanelHeight-250 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''StimulusPos'');']);
%}
 
 set(strctStatisticsControllers.m_hPanel,'visible','off');
%% Design options
 strctControllers.hImageListContextMenu = uicontextmenu;
 strctControllers.hColorListContextMenu = uicontextmenu;
uimenu(strctControllers.hImageListContextMenu, 'Label', 'Load List', 'Callback', [g_strctParadigm.m_strCallbacks,'(''LoadList'');']);


strctControllers.m_hFavoriteLists = uicontrol('Style', 'listbox', 'String', fnCellToCharShort(g_strctParadigm.g_strctStatistics.m_acFavoriteLists),...
    'Position', [5 iPanelHeight-200 ,strctDesignControllers.m_iPanelWidth-10 120], 'parent',strctDesignControllers.m_hPanel, 'Callback',[g_strctParadigm.m_strCallbacks,'(''LoadFavoriteList'');'],...
    'value',max(1,g_strctParadigm.m_iInitialIndexInFavroiteList),'UIContextMenu',strctControllers.hImageListContextMenu);

strctControllers.m_hBlockText= uicontrol('Style', 'text', 'String', 'Stimuli Blocks:',...
    'Position', [5 iPanelHeight-225 ,130 15], 'parent',strctDesignControllers.m_hPanel,'HorizontalAlignment','left');


if ~isempty(g_strctParadigm.m_strctDesign)
    acBlockNames = {g_strctParadigm.m_strctDesign.m_strctBlocksAndOrder.m_astrctBlocks.m_strBlockName};
    acBlockNames = acBlockNames(g_strctParadigm.m_strctDesign.m_strctBlocksAndOrder.m_astrctBlockOrder(1).m_aiBlockIndexOrder);
else
    acBlockNames = {};
end

if ~isempty(g_strctParadigm.m_strctMasterColorTable)
	acColorNames = {g_strctParadigm.m_strctMasterColorTable};
else
	acColorNames = {};
end

if ~isempty(g_strctParadigm.m_strctDesign)
    acOrderNames = {g_strctParadigm.m_strctDesign.m_strctBlocksAndOrder.m_astrctBlockOrder.m_strOrderName};
else
    acOrderNames = {};
end

strctControllers.m_hBlockOrderPopup = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'popupmenu', 'String', ...
     acOrderNames,'value', 1,...
     'Position', [90 iPanelHeight-265 160 60], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ChangeBlockOrder'');']);


strctControllers.m_hBlockLists = uicontrol('Style', 'listbox', 'String', acBlockNames,...
    'Position', [5 iPanelHeight-330 ,strctDesignControllers.m_iPanelWidth-10 100], 'parent',strctDesignControllers.m_hPanel, 'Callback',[g_strctParadigm.m_strCallbacks,'(''JumpToBlock'');'],...
    'value',1,'max',100);

strctControllers.m_hFixationSpotChange = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Load Image Set',...
     'Position', [5 iPanelHeight-365 iButtonWidth+40 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''LoadImageSet'');'],'FontWeight','bold');
	
strctControllers.m_hFixationSpotChange = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'pushbutton', 'String', 'New Fixation Spot',...
     'Position', [5 iPanelHeight-400 iButtonWidth+40 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''FixationSpot'');'],'FontWeight','bold');
	 
strctControllers.m_hResetStimPosition = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Reset Stim Spot',...
     'Position', [5 iPanelHeight-435 iButtonWidth+40 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ResetStimulusPosition'');'],'FontWeight','bold');
%{
if g_strctParadigm.m_bRandFixPos
strctControllers.m_hRandomPosition = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Rnd Fix Pos',...
     'Position', [5 iPanelHeight-365 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandFixationSpot'');'],'FontWeight','bold');
else
strctControllers.m_hRandomPosition = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Rnd Fix Pos',...
     'Position', [5 iPanelHeight-365 iButtonWidth 30], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandFixationSpot'');'],'FontWeight','normal');
end;
 
strctControllers.m_hRandomPositionMinEdit = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'edit', 'String', num2str(g_strctParadigm.m_fRandFixPosMin),...
     'Position', [iButtonWidth+15 iPanelHeight-365 25 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandFixationSpotMinEdit'');']);

strctControllers.m_hRandomPositionMaxEdit = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'edit', 'String', num2str(g_strctParadigm.m_fRandFixPosMax),...
     'Position', [iButtonWidth+50 iPanelHeight-365 25 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandFixationSpotMaxEdit'');']);

strctControllers.m_hRandomPositionRadiusEdit = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'edit', 'String', num2str(g_strctParadigm.m_fRandFixRadius),...
     'Position', [iButtonWidth+90 iPanelHeight-365 25 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandFixationSpotRadiusEdit'');']);




strctControllers.m_hRandomPositionRadiusEditCheck = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Sync To Stimulus','value',g_strctParadigm.m_bRandFixSyncStimulus,...
     'Position', [5 iPanelHeight-iOffset 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandFixationSync'');']);

strctControllers.m_hHideWhenNotLooking = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Do not display images when monkey is not looking','value', g_strctParadigm.m_bHideStimulusWhenNotLooking,...
     'Position', [5 iPanelHeight-iOffset-20 280 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''HideNotLookingToggle'');']);
 


strctControllers.m_hRandomImageIndex = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Order','value', g_strctParadigm.m_bRandom,...
     'Position', [5 iPanelHeight-iOffset-60 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''Random'');']);

strctControllers.m_hParameterSweep = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Parameter Sweep','value', g_strctParadigm.m_bParameterSweep,...
     'Position', [5 iPanelHeight-iOffset-80 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ParameterSweep'');']);
 %}
 
 strctControllers.m_hSetStimulusClipping = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Stimulus Clipping','value', g_strctParadigm.m_bClipStimulusOutsideStimArea,...
     'Position', [5 iPanelHeight-iOffset-80 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetStimulusClipping'');']);
 %{
 strctControllers.m_hPhotoDiodeRect = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Photodiode Rect','value', g_strctParadigm.m_bShowPhotodiodeRect,...
     'Position', [5 iPanelHeight-iOffset-40 240 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PhotoDiodeRectToggle'');']);
 %}
 %{
  iOffset = 400;
 if ~isempty(g_strctParadigm.m_acNoisePatternsFiles)
     strctControllers.m_hNoiseOverlay = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Noise Overlay','value', ...
         fnTsGetVar('g_strctParadigm','NoiseOverlayActive'),...
         'Position', [5 iPanelHeight-iOffset-100 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''NoiseOverlayToggle'');']);
     strctControllers.m_hNoisePatternPopup = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'popupmenu', 'String', ...
         g_strctParadigm.m_acNoisePatternsFiles,'value', 1,...
         'Position', [130 iPanelHeight-iOffset-140 160 60], 'Callback', [g_strctParadigm.m_strCallbacks,'(''NoisePatternSwitch'');']);
end

strctControllers.m_hParameterSweepPopup = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'popupmenu', 'String', ...
    {g_strctParadigm.m_astrctParameterSweepModes.m_strName},'value', 1,...
     'Position', [130 iPanelHeight-iOffset-115 160 60], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ParameterSweepMode'');']);
  %}

strctControllers.m_hDisplayStimuliLocally = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Play Stimuli Locally','value', g_strctParadigm.m_bDisplayStimuliLocally,...
     'Position', [5 iPanelHeight-iOffset-120 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PlayStimuliLocally'');']);
 
strctControllers.m_hShowWhileLoading = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Show While Loading','value',  g_strctParadigm.m_bShowWhileLoading,...
     'Position', [5 iPanelHeight-iOffset-140 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ShowWhileLoading'');']);
 
 
strctControllers.m_hRepeatNonFixated= uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Repeat Non Fixated','value',  g_strctParadigm.m_bRepeatNonFixatedImages,...
     'Position', [5 iPanelHeight-iOffset-160 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RepatNonFixatedToggle'');']);

 bForceStereo = fnTsGetVar('g_strctParadigm','ForceStereoOnMonocularLists') > 0;
 strctControllers.m_hForceStereoOnMonocularLists= uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Force Stereo in Monocular Designs','value',  bForceStereo,...
     'Position', [5 iPanelHeight-iOffset-180 220 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ForceStereoToggle'');']);

 acLocalStereoMode = {'Left Eye Only','Right Eye Only','Left & Side by Side (Small)','Side by Side (Large)','Left: Red, Right: Blue','Left: Blue, Right: Red'};
 if isfield(g_strctParadigm,'m_strLocalStereoMode')
    iIndex=find(ismember(acLocalStereoMode,g_strctParadigm.m_strLocalStereoMode));
    if ~isempty(iIndex)
        iInitialMode = iIndex;
    else
     iInitialMode = 1;
    end
 else
     iInitialMode = 1;
 end
  strctControllers.m_hLocalStereoModeText = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'text', 'String', ...
     'Local Stereo Mode','Position', [5 iPanelHeight-iOffset-205 130 20],'HorizontalAlignment','left');

 
 strctControllers.m_hLocalStereoModePopup = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'popupmenu', 'String', ...
     acLocalStereoMode,'value', iInitialMode,...
     'Position', [130 iPanelHeight-iOffset-240 160 60], 'Callback', [g_strctParadigm.m_strCallbacks,'(''LocalStereoMode'');']);

  strctControllers.m_hBlocksDoneText = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'text', 'String', ...
     'After blocks action:','Position', [5 iPanelHeight-iOffset-235 100 20],'HorizontalAlignment','left');
 
acBlocksDoneAction = {'Reset And Stop',  'Set Next Order But Do not Start',   'Repeat Same Order',    'Set Next Order and Start'};

iIndex = fnFindString(acBlocksDoneAction, g_strctParadigm.m_strBlockDoneAction);
if iIndex == -1
    g_strctParadigm.m_strBlockDoneAction = acBlocksDoneAction{1};
    iIndex = 1;
end
 
 strctControllers.m_hBlocksDoneActionPopup = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'popupmenu', 'String', ...
     acBlocksDoneAction,'value', iIndex,...
     'Position', [130 iPanelHeight-iOffset-270 160 60], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BlocksDoneAction'');']);


strctControllers.m_hLoopCurrentBlock = uicontrol('Parent',strctDesignControllers.m_hPanel,'Style', 'checkbox', 'String', 'Loop Current Block','value',  g_strctParadigm.m_bBlockLooping,...
     'Position', [5 iPanelHeight-iOffset-255 180 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BlockLoopingToggle'');']);
 
% %  % Siva added start
% %  set(strctDesignControllers.m_hPanel,'visible','off');
% %  % Siva added end
 
%% Static Bar Variables
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*0, ...
    'Bar Width', 'PlainBarWidth', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm','PlainBarWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*1, ...
    'Bar Length', 'PlainBarLength', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'PlainBarLength'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*2, ...
    'Orientation', 'PlainBarOrientation', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'PlainBarOrientation'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*3, ...
    'Range', 'PlainBarMoveDistance', ...
    0, 400, [1, 100], fnTsGetVar('g_strctParadigm' ,'PlainBarMoveDistance'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*4, ...
    'Speed', 'PlainBarMoveSpeed', ...
    0, 400, [1, 100], fnTsGetVar('g_strctParadigm' ,'PlainBarMoveSpeed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*5, ...
    'Blur Steps', 'PlainBarBlurSteps', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'PlainBarBlurSteps'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*6, ...
    'Bar Red', 'PlainBarStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'PlainBarStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*7, ...
    'Bar Green', 'PlainBarStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'PlainBarStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*8, ...
    'Bar Blue', 'PlainBarStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'PlainBarStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*9, ...
    'Background Red', 'PlainBarBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'PlainBarBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*10, ...
    'Background Green', 'PlainBarBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'PlainBarBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*11, ...
    'Background Blue', 'PlainBarBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'PlainBarBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*12, ...
    'Stimulus Color', 'PlainBarStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'PlainBarStimulusPresetColor'));

	

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctPlainBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-80 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	   	
strctControllers.m_hUseCalibratedColors = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Preset Colors','value',...
	g_strctParadigm.m_bUsePlainBarPresetColors,...
    'Position', [5 iPanelHeight-iOffset-100 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UsePlainBarPresetColors'');']); 

strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Test Value','value',...
	g_strctParadigm.m_bRandomTestValue,...
    'Position', [5 iPanelHeight-iOffset-120 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetRandomTestValue'');']);	
	   	

strctControllers.m_hClearCurrentTestObjects = uicontrol('Parent', strctPlainBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Clear Test Variables',...
      'Position', [125 iPanelHeight-iOffset-140 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ClearCurrentTestObjects'');']);	
	
strctControllers.m_hSetCurrentTestObject = uicontrol('Parent', strctPlainBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Set Test Variable',...
      'Position', [5 iPanelHeight-iOffset-140 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetCurrentSelectedVariableAsTestObject'');']);
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*16, ...
    'Set Test Range', 'PlainBarCurrentVariableModifyRange', ...
    1, 200, [1, 1], fnTsGetVar('g_strctParadigm' ,'PlainBarCurrentVariableModifyRange'));
	  
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctPlainBarControllers.m_hPanel, 40+30*17, ...
    'Set Test Hz', 'PlainBarCurrentVariableModifySpeedHz', ...
    1, 200, [1, 1], fnTsGetVar('g_strctParadigm' ,'PlainBarCurrentVariableModifySpeedHz'));	  
	  
strctControllers.m_hSetFG_g = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'FG_gray',...
    'Position', [5 iPanelHeight-iOffset-240 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_g'');']);	
strctControllers.m_hSetBG_g = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'BG_gray',...
    'Position', [120 iPanelHeight-iOffset-240 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_g'');']);	

strctControllers.m_hSetFG_w = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'w',...
    'Position', [5 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_w'');']);	
strctControllers.m_hSetFG_DKL0 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '0',...
    'Position', [55 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL0'');']);	
strctControllers.m_hSetBG_w = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'w',...
    'Position', [120 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_w'');']);	
strctControllers.m_hSetBG_DKL0 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '0',...
    'Position', [175 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL0'');']);	

strctControllers.m_hSetFG_k = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'k',...
    'Position', [5 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_k'');']);	
strctControllers.m_hSetFG_DKL45 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '45',...
    'Position', [55 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL45'');']);	
strctControllers.m_hSetBG_k = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'k',...
    'Position', [120 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_k'');']);	
strctControllers.m_hSetBG_DKL45 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '45',...
    'Position', [175 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL45'');']);	

strctControllers.m_hSetFG_Lplus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L+',...
    'Position', [5 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Lplus'');']);	
strctControllers.m_hSetFG_DKL90 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '90',...
    'Position', [55 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL90'');']);	
strctControllers.m_hSetBG_Lplus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L+',...
    'Position', [120 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Lplus'');']);	
strctControllers.m_hSetBG_DKL90 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '90',...
    'Position', [175 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL90'');']);	

strctControllers.m_hSetFG_Lminus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L-',...
    'Position', [5 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Lminus'');']);	
strctControllers.m_hSetFG_DKL135 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '135',...
    'Position', [55 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL135'');']);	
strctControllers.m_hSetBG_Lminus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L-',...
    'Position', [120 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Lminus'');']);	
strctControllers.m_hSetBG_DKL135 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '135',...
    'Position', [175 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL135'');']);	

strctControllers.m_hSetFG_Mplus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M+',...
    'Position', [5 iPanelHeight-iOffset-340 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Mplus'');']);	
strctControllers.m_hSetFG_DKL180 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '180',...
    'Position', [55 iPanelHeight-iOffset-340 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL180'');']);	
strctControllers.m_hSetBG_Mplus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M+',...
    'Position', [120 iPanelHeight-iOffset-340 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Mplus'');']);	
strctControllers.m_hSetBG_DKL180 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '180',...
    'Position', [175 iPanelHeight-iOffset-340 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL180'');']);	

strctControllers.m_hSetFG_Mminus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M-',...
    'Position', [5 iPanelHeight-iOffset-360 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Mminus'');']);	
strctControllers.m_hSetFG_DKL225 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '225',...
    'Position', [55 iPanelHeight-iOffset-360 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL225'');']);	
strctControllers.m_hSetBG_Mminus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M-',...
    'Position', [120 iPanelHeight-iOffset-360 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Mminus'');']);	
strctControllers.m_hSetBG_DKL225 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '225',...
    'Position', [175 iPanelHeight-iOffset-360 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL225'');']);	

strctControllers.m_hSetFG_Splus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S+',...
    'Position', [5 iPanelHeight-iOffset-380 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Splus'');']);	
strctControllers.m_hSetFG_DKL270 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '270',...
    'Position', [55 iPanelHeight-iOffset-380 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL270'');']);	
strctControllers.m_hSetBG_Splus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S+',...
    'Position', [120 iPanelHeight-iOffset-380 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Splus'');']);	
strctControllers.m_hSetBG_DKL270 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '270',...
    'Position', [175 iPanelHeight-iOffset-380 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL270'');']);	

strctControllers.m_hSetFG_Sminus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S-',...
    'Position', [5 iPanelHeight-iOffset-400 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Sminus'');']);	
strctControllers.m_hSetFG_DKL315 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '315',...
    'Position', [55 iPanelHeight-iOffset-400 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL315'');']);	
strctControllers.m_hSetBG_Sminus = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S-',...
    'Position', [120 iPanelHeight-iOffset-400 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Sminus'');']);	
strctControllers.m_hSetBG_DKL315 = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'pushbutton', 'String', '315',...
    'Position', [175 iPanelHeight-iOffset-400 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL315'');']);	






	
%{



strctControllers.m_hUseCalibratedColors = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Calibrated Colors','value',...
	g_strctParadigm.m_bUseCalibratedColors,...
    'Position', [5 iPanelHeight-iOffset-180 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseCalibratedColors'');']);


	strctControllers.m_hCycleColors = uicontrol('Parent',strctPlainBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Colors','value',...
	g_strctParadigm.m_bRealTimeCycleColors,...
    'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RealTimeCycleColors'');']);
%}


set(strctPlainBarControllers.m_hPanel,'visible','off');

	
%% Moving Bar Variables


strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*0, ...
    'Bar Width', 'MovingBarWidth', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm','MovingBarWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*1, ...
    'Bar Length', 'MovingBarLength', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'MovingBarLength'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*2, ...
    'Orientation', 'MovingBarOrientation', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarOrientation'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*3, ...
    'Blur Steps', 'MovingBarBlurSteps', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarBlurSteps'));
	%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*4, ...
    'Range', 'MovingBarMoveDistance', ...
    0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'MovingBarMoveDistance'));
	%}

	strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*4, ...
    'Speed', 'MovingBarMoveSpeed', ...
    0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'MovingBarMoveSpeed'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*5, ...
    'Number of Bars', 'MovingBarNumberOfBars', ...
    1, 15, [1, 1], fnTsGetVar('g_strctParadigm' ,'MovingBarNumberOfBars'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*6, ...
    'Stimulus Area', 'MovingBarStimulusArea', ...
    1, 1024, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusArea'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*7, ...
    'Stimulus On Time', 'MovingBarStimulusOnTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusOnTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*8, ...
    'Stimulus Off Time', 'MovingBarStimulusOffTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusOffTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*9, ...
    'Bar Red', 'MovingBarStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*10, ...
    'Bar Green', 'MovingBarStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*11, ...
    'Bar Blue', 'MovingBarStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*12, ...
    'Background Red', 'MovingBarBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovingBarBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*13, ...
    'Background Green', 'MovingBarBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovingBarBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*14, ...
    'Background Blue', 'MovingBarBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovingBarBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*15, ...
    'Stimulus Color', 'MovingBarStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'MovingBarStimulusPresetColor'));

	
strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctMovingBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-180 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	  
strctControllers.m_hSetRandomStimulusPosition = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Position','value',...
	g_strctParadigm.m_bRandomStimulusPosition,...
    'Position', [5 iPanelHeight-iOffset-200 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusLocation'');']);
	
strctControllers.m_hSetRandomStimulusOrientation = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Orientation','value',...
	g_strctParadigm.m_bRandomStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusOrientation'');']);	

strctControllers.m_hSetCycleStimulusOrientation = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Orientation','value',...
	g_strctParadigm.m_bCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleStimulusOrientation'');']);	
	
strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Orientation','value',...
	g_strctParadigm.m_bReverseCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseCycleStimulusOrientation'');']);	
	%{
strctControllers.m_hUseCalibratedColors = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Calibrated Colors','value',...
	g_strctParadigm.m_bUseCalibratedColors,...
    'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseCalibratedColors'');']);
	%}
	
strctControllers.m_hClearCurrentTestObjects = uicontrol('Parent', strctMovingBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Clear Test Variables',...
      'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ClearCurrentTestObjects'');']);	
	
strctControllers.m_hSetCurrentTestObject = uicontrol('Parent', strctMovingBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Set Test Variable',...
      'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetCurrentSelectedVariableAsTestObject'');']);	

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*22, ...
    'Set Test Range', 'MovingBarCurrentVariableModifyRange', ...
    1, 200, [1, 1], fnTsGetVar('g_strctParadigm' ,'CurrentVariableModifyRange'));
	  
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovingBarControllers.m_hPanel, 40+30*23, ...
    'Set Test Hz', 'MovingBarCurrentVariableModifySpeedHz', ...
    1, 200, [1, 1], fnTsGetVar('g_strctParadigm' ,'CurrentVariableModifySpeedHz'));	  
	%{
strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Test Value','value',...
	g_strctParadigm.m_bRandomTestValue,...
    'Position', [5 iPanelHeight-iOffset-400 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetRandomTestValue'');']);	
	%}
	%{
strctControllers.m_hUseCalibratedColors = uicontrol('Parent',strctMovingBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Preset Colors','value',...
	g_strctParadigm.m_bUseMovingBarPresetColors,...
    'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseMovingBarPresetColors'');']);
%}

set(strctMovingBarControllers.m_hPanel,'visible','off');
	
%% Fivedot variables

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*0, ...
%     'Fixation Size (pix):', 'FixationSizePix',  0, 50, [1 5], fnTsGetVar(g_strctParadigm,'FixationSizePix'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel,40+30*1, ...
    'Stimulus ON Time (ms):', 'FivedotStimulusON_MS',10, 4000, [1 50], fnTsGetVar(g_strctParadigm,'FivedotStimulusON_MS'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*2, ...
    'Spread (pix):', 'SpreadPix', 0, 300, [1 50], fnTsGetVar(g_strctParadigm,'SpreadPix'));

%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctParadigmControllers.m_hPanel, 40+30*3, ...
    'Eye Gain X:', 'EyeX', -3, 3,  [0.1 0.5], fnTsGetVar('g_strctEyeCalib','GainX'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctParadigmControllers.m_hPanel, 40+30*4, ...
    'Eye Gain Y:', 'EyeY', -3, 3,  [0.1 0.5], fnTsGetVar('g_strctEyeCalib','GainY'));
%}

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*6, ...
%     'Gaze Time(ms):', 'GazeTimeMS', 30, 10000, [1, 50], fnTsGetVar('g_strctParadigm','GazeTimeMS'));
% 	
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*7, ...
%     'Gaze Time (Low):', 'GazeTimeLowMS',30, 10000, [1, 50], fnTsGetVar('g_strctParadigm','GazeTimeLowMS'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*8, ...
%     'Gaze area (pix):', 'GazeBoxPix', 0, 300, [1, 50], fnTsGetVar(g_strctParadigm,'GazeBoxPix'));
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*9, ...
%     'Juice Time (ms):', 'JuiceTimeMS',25, 100, [1, 5], fnTsGetVar('g_strctParadigm','JuiceTimeMS'));
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*10, ...
%     'Juice Time (High):', 'JuiceTimeHighMS',25, 100, [1, 5], fnTsGetVar('g_strctParadigm','JuiceTimeHighMS'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*11, ...
%     'Blink Time (ms):', 'BlinkTimeMS',0, 500, [1, 50], fnTsGetVar('g_strctParadigm','BlinkTimeMS'));
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers, strctFivedotControllers.m_hPanel, 40+30*12, ...
%     'Positive Increment (%):', 'PositiveIncrement',5, 100, [1, 5], fnTsGetVar('g_strctParadigm','PositiveIncrement'));


% strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDualstimControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
%       'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
% 
% strctControllers.m_hDiscoButton = uicontrol('Parent',strctFivedotControllers.m_hPanel,'Style', 'pushbutton', 'String', 'DISCO Button',...
%     'Position', [5 iPanelHeight-600 iButtonWidth 40 ], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DrawAttention'');']);
% 
% strctControllers.m_hFixationSpotChange = uicontrol('Parent',strctFivedotControllers.m_hPanel,'Parent',hParadigmPanel,'Style', 'pushbutton', 'String', 'Free Point',...
%     'Position',  [iButtonWidth+20 iPanelHeight-600 iButtonWidth 40 ], 'Callback', [g_strctParadigm.m_strCallbacks,'(''FreePoint'');']);
% 
% strctControllers.m_hBackgroundButton = uicontrol('Parent',strctFivedotControllers.m_hPanel,'Parent',hParadigmPanel,'Style', 'pushbutton', 'String', 'Background Color',...
%     'Position',  [2*iButtonWidth+40 iPanelHeight-600 iButtonWidth 40 ], 'Callback', [g_strctParadigm.m_strCallbacks,'(''BackgroundColor'');']);

if g_strctParadigm.m_bShowEyeTraces
    strFontWeight = 'bold';
else
    strFontWeight = 'normal';
end;

strctControllers.m_hEyeTraceButton = uicontrol('Parent',strctFivedotControllers.m_hPanel,'Style', 'pushbutton', 'String', 'Eye Trace',...
    'Position', [5 iPanelHeight-550 iButtonWidth 40 ], 'Callback', [g_strctParadigm.m_strCallbacks,'(''EyeTrace'');'],'fontweight',strFontWeight);

set(strctFivedotControllers.m_hPanel,'visible','off');

%% Dualstim Variables

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*0, ...
    'Noise Stimulus Type', 'DualstimPrimaryuseRGBCloud', ...
    0, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'DualstimPrimaryuseRGBCloud'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*1, ...
    'Stimulus Area', 'DualstimStimulusArea', ...
    1, 512, [25, 50], fnTsGetVar('g_strctParadigm' ,'DualstimStimulusArea')); %Felix note: gets adjusted in Callbacks to avoid aliasing issues as it scales

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*2, ...
    'Cloud Scale', 'DensenoiseScale', ...
    1, 6, [1, 2], fnTsGetVar('g_strctParadigm','DensenoiseScale'));


strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*4, ...
    'Number of Bars', 'DualstimNumberOfBars', ...
    1, 16, [1, 1], fnTsGetVar('g_strctParadigm' ,'DualstimNumberOfBars'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*5, ...
    'Bar Width', 'DualstimWidth', ...
    1, 50, [1, 10], fnTsGetVar('g_strctParadigm','DualstimWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*6, ...    
    'Stimulus On Time', 'GroundtruthStimulusOnTime', ...    
    10, 4000, [10, 200], fnTsGetVar('g_strctParadigm' ,'GroundtruthStimulusOnTime'));	

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*7, ...    
    'Stimulus Off Time', 'GroundtruthStimulusOffTime', ...    
    10, 4000, [10, 200], fnTsGetVar('g_strctParadigm' ,'GroundtruthStimulusOffTime'));

strctControllers.m_hSetGroundtruthCISonly = uicontrol('Parent',strctDualstimControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use CIS only','value',...
	g_strctParadigm.m_bGroundtruthCISonly,...
    'Position', [5 iPanelHeight-iOffset-80 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''GroundtruthCISonly'');']);	

%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*4, ...
    'Bar Width', 'DualstimWidth', ...
    1, 15, [1, 10], fnTsGetVar('g_strctParadigm','DualstimWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*5, ...
    'Bar Length', 'DualstimLength', ...
    1, 15, [1, 10], fnTsGetVar('g_strctParadigm' ,'DualstimLength'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*6, ...     
    'Orientation', 'DualstimOrientation', ...     
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimOrientation'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*7, ...     
    'Range', 'DualstimMoveDistance', ...     
    0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'DualstimMoveDistance'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*8, ...     
    'Speed', 'DualstimMoveSpeed', ...     
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimMoveSpeed'));


strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*9, ...
    'Number of Lminus', 'DualstimNLminus', ...
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimNLminus'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*10, ...
    'Number of Lplus', 'DualstimNLplus', ...
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimNLplus'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*11, ...
    'Number of Mminus', 'DualstimNMminus', ...
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimNMminus'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*12, ...
    'Number of Mplus', 'DualstimNMplus', ...
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimNMplus'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*13, ...
    'Number of Sminus', 'DualstimNSminus', ...
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimNSminus'));
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*14, ...
    'Number of Splus', 'DualstimNSplus', ...
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'DualstimNSplus'));
%}
    
%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*16, ...
    'Background Red', 'DualstimBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DualstimBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*17, ...
    'Background Green', 'DualstimBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DualstimBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*18, ...
    'Background Blue', 'DualstimBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DualstimBackgroundBlue'));
%}

% Peripheral Stimulus variables
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*20, ...
    'ET Stim Type', 'DualstimSecondaryUseCloud', ...
    0, 6, [1, 1], fnTsGetVar('g_strctParadigm' ,'DualstimSecondaryUseCloud'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*21, ...
    'ET Stimulus Area', 'DualstimSecondaryStimulusArea', ...
    1, 300, [30, 60], fnTsGetVar('g_strctParadigm' ,'DualstimSecondaryStimulusArea')); %Felix note: gets adjusted in Callbacks to avoid aliasing issues as it scales

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*22, ...
    'ET Resolution (pix)', 'DualstimSecondaryBarWidth', ...
    1, 20, [1, 2], fnTsGetVar('g_strctParadigm','DualstimSecondaryBarWidth'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*16, ...
%     'Peripheral Bar Width', 'DualstimSecondaryWidth', ...
%     1, 200, [1, 10], fnTsGetVar('g_strctParadigm','DualstimSecondaryWidth'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*17, ...
%     'Peripheral Bar Length', 'DualstimSecondaryLength', ...
%     1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'DualstimSecondaryLength'));

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDualstimControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-400 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	

strctControllers.m_hUpdateSecondaryStimulusPosition = uicontrol('Parent', strctDualstimControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Secondary Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-420 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateSecondaryStimulusPosition'');']);	

strctControllers.m_hUpdateTertiaryStimulusPosition = uicontrol('Parent', strctDualstimControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Tertiary Stimulus Location',...
      'Position', [125 iPanelHeight-iOffset-420 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateTertiaryStimulusPosition'');']);	

%felix added: stimulus overlap case
strctControllers.m_hSetRandPosEachframe = uicontrol('Parent',strctDualstimControllers.m_hPanel,'Style', 'checkbox', 'String', 'New Position Each Frame','value',...
	g_strctParadigm.m_bRandPosEachFrame,...
    'Position', [5 iPanelHeight-iOffset-440 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandPosEachFrame'');']);	

strctControllers.m_hSetStimulusCollisions = uicontrol('Parent',strctDualstimControllers.m_hPanel,'Style', 'checkbox', 'String', 'Stimulus Overlap','value',...
	g_strctParadigm.m_bStimulusCollisions,...
    'Position', [5 iPanelHeight-iOffset-460 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''StimulusCollisions'');']);	

strctControllers.m_hSetRandomStimulusPosition = uicontrol('Parent',strctDualstimControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Position','value',...
	g_strctParadigm.m_bRandomStimulusPosition,...
    'Position', [5 iPanelHeight-iOffset-480 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusLocation'');']);
	
strctControllers.m_hSetContinuousDisplay = uicontrol('Parent',strctDualstimControllers.m_hPanel,'Style', 'checkbox', 'String', 'Continuous Stimulus','value',...
	fnTsGetVar('g_strctParadigm' ,'ContinuousDisplay'),...
    'Position', [5 iPanelHeight-iOffset-500 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ContinuousDisplay'');']);	

set(strctDualstimControllers.m_hPanel,'visible','off');
	

%% CIHandmapper Variables

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*0, ...
%     'Use Color Cloud Stimulus', 'DualstimPrimaryuseRGBCloud', ...
%     0, 1, [1, 1], fnTsGetVar('g_strctParadigm' ,'DualstimPrimaryuseRGBCloud'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*0, ...
    'Stimulus Area', 'CIHandmapperStimulusArea', ...
    1, 500, [25, 50], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusArea')); %Felix note: gets adjusted in Callbacks to avoid aliasing issues as it scales

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*1, ...
    'Number of Bars', 'CIHandmapperNumberOfBars', ...
    1, 15, [1, 1], fnTsGetVar('g_strctParadigm' ,'CIHandmapperNumberOfBars'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*2, ...
    'Bar Width', 'CIHandmapperWidth', ...
    1, 100, [1, 10], fnTsGetVar('g_strctParadigm','CIHandmapperWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*3, ...
    'Bar Length', 'CIHandmapperLength', ...
    1, 100, [1, 10], fnTsGetVar('g_strctParadigm' ,'CIHandmapperLength'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*4, ...     
    'Orientation', 'CIHandmapperOrientation', ...     
    0, 180, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperOrientation'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*5, ...    
    'Stimulus On Time', 'CIHandmapperStimulusOnTime', ...    
    10, 2048, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusOnTime'));	

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*6, ...    
    'Stimulus Off Time', 'CIHandmapperStimulusOffTime', ...    
    10, 2048, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusOffTime'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*7, ...     
%     'Blur Steps', 'CIHandmapperBlurSteps', ...     
%     0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBlurSteps'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*7, ...     
    'Range', 'CIHandmapperMoveDistance', ...     
    0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'CIHandmapperMoveDistance'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*8, ...     
    'Speed', 'CIHandmapperMoveSpeed', ...     
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperMoveSpeed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*9, ...    
    'Bar Red', 'CIHandmapperStimulusRed', ...    
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*10, ...
    'Bar Green', 'CIHandmapperStimulusGreen', ...    
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*11, ...
    'Bar Blue', 'CIHandmapperStimulusBlue', ...    
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*12, ...
    'Background Red', 'CIHandmapperBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*13, ...
    'Background Green', 'CIHandmapperBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*14, ...
    'Background Blue', 'CIHandmapperBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBackgroundBlue'));

strctControllers.m_hSetFG_g = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'FG_gray',...
    'Position', [5 iPanelHeight-iOffset-160 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_g'');']);	
strctControllers.m_hSetBG_g = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'BG_gray',...
    'Position', [120 iPanelHeight-iOffset-160 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_g'');']);	

strctControllers.m_hSetFG_w = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'w',...
    'Position', [5 iPanelHeight-iOffset-180 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_w'');']);	
strctControllers.m_hSetFG_DKL0 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '0',...
    'Position', [55 iPanelHeight-iOffset-180 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL0'');']);	
strctControllers.m_hSetBG_w = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'w',...
    'Position', [120 iPanelHeight-iOffset-180 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_w'');']);	
strctControllers.m_hSetBG_DKL0 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '0',...
    'Position', [175 iPanelHeight-iOffset-180 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL0'');']);	

strctControllers.m_hSetFG_k = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'k',...
    'Position', [5 iPanelHeight-iOffset-200 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_k'');']);	
strctControllers.m_hSetFG_DKL45 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '45',...
    'Position', [55 iPanelHeight-iOffset-200 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL45'');']);	
strctControllers.m_hSetBG_k = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'k',...
    'Position', [120 iPanelHeight-iOffset-200 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_k'');']);	
strctControllers.m_hSetBG_DKL45 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '45',...
    'Position', [175 iPanelHeight-iOffset-200 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL45'');']);	

strctControllers.m_hSetFG_Lplus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L+',...
    'Position', [5 iPanelHeight-iOffset-220 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Lplus'');']);	
strctControllers.m_hSetFG_DKL90 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '90',...
    'Position', [55 iPanelHeight-iOffset-220 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL90'');']);	
strctControllers.m_hSetBG_Lplus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L+',...
    'Position', [120 iPanelHeight-iOffset-220 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Lplus'');']);	
strctControllers.m_hSetBG_DKL90 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '90',...
    'Position', [175 iPanelHeight-iOffset-220 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL90'');']);	

strctControllers.m_hSetFG_Lminus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L-',...
    'Position', [5 iPanelHeight-iOffset-240 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Lminus'');']);	
strctControllers.m_hSetFG_DKL135 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '135',...
    'Position', [55 iPanelHeight-iOffset-240 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL135'');']);	
strctControllers.m_hSetBG_Lminus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'L-',...
    'Position', [120 iPanelHeight-iOffset-240 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Lminus'');']);	
strctControllers.m_hSetBG_DKL135 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '135',...
    'Position', [175 iPanelHeight-iOffset-240 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL135'');']);	

strctControllers.m_hSetFG_Mplus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M+',...
    'Position', [5 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Mplus'');']);	
strctControllers.m_hSetFG_DKL180 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '180',...
    'Position', [55 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL180'');']);	
strctControllers.m_hSetBG_Mplus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M+',...
    'Position', [120 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Mplus'');']);	
strctControllers.m_hSetBG_DKL180 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '180',...
    'Position', [175 iPanelHeight-iOffset-260 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL180'');']);	

strctControllers.m_hSetFG_Mminus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M-',...
    'Position', [5 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Mminus'');']);	
strctControllers.m_hSetFG_DKL225 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '225',...
    'Position', [55 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL225'');']);	
strctControllers.m_hSetBG_Mminus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'M-',...
    'Position', [120 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Mminus'');']);	
strctControllers.m_hSetBG_DKL225 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '225',...
    'Position', [175 iPanelHeight-iOffset-280 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL225'');']);	

strctControllers.m_hSetFG_Splus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S+',...
    'Position', [5 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Splus'');']);	
strctControllers.m_hSetFG_DKL270 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '270',...
    'Position', [55 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL270'');']);	
strctControllers.m_hSetBG_Splus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S+',...
    'Position', [120 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Splus'');']);	
strctControllers.m_hSetBG_DKL270 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '270',...
    'Position', [175 iPanelHeight-iOffset-300 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL270'');']);	

strctControllers.m_hSetFG_Sminus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S-',...
    'Position', [5 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_Sminus'');']);	
strctControllers.m_hSetFG_DKL315 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '315',...
    'Position', [55 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetFG_DKL315'');']);	
strctControllers.m_hSetBG_Sminus = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', 'S-',...
    'Position', [120 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_Sminus'');']);	
strctControllers.m_hSetBG_DKL315 = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'pushbutton', 'String', '315',...
    'Position', [175 iPanelHeight-iOffset-320 50 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetBG_DKL315'');']);	


% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDualstimControllers.m_hPanel, 40+30*15, ...    'Stimulus Color', 'DualstimStimulusPresetColor', ...    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'DualstimStimulusPresetColor'));


strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctCIHandmapperControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-360 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	

strctControllers.m_hSetRandomStimulusPosition = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Position','value',...
	g_strctParadigm.m_bRandomStimulusPosition,...
    'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusLocation'');']);
	
strctControllers.m_hSetCycleStimulusOrientation = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Orientation','value',...
	g_strctParadigm.m_bCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-400 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleStimulusOrientation'');']);	
	
strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Orientation','value',...
	g_strctParadigm.m_bReverseCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-420 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseCycleStimulusOrientation'');']);	

%felix added: stimulus overlap case
strctControllers.m_hSetStimulusCollisions = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'checkbox', 'String', 'Stimulus Overlap','value',...
	g_strctParadigm.m_bStimulusCollisions,...
    'Position', [5 iPanelHeight-iOffset-440 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''StimulusCollisions'');']);	

strctControllers.m_hSetRandPosEachframe = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'checkbox', 'String', 'New Position Each Frame','value',...
	g_strctParadigm.m_bRandPosEachFrame,...
    'Position', [5 iPanelHeight-iOffset-460 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandPosEachFrame'');']);	

strctControllers.m_hSetRandomStimulusOrientation = uicontrol('Parent',strctCIHandmapperControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Orientation','value',...
	g_strctParadigm.m_bRandomStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-480 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusOrientation'');']);	

set(strctCIHandmapperControllers.m_hPanel,'visible','off');

%% Groundtruth Variables

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*0, ...
%     'Use Color Cloud Stimulus', 'DualstimPrimaryuseRGBCloud', ...
%     0, 1, [1, 1], fnTsGetVar('g_strctParadigm' ,'DualstimPrimaryuseRGBCloud'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*0, ...
    'Stimulus Area', 'GroundtruthStimulusArea', ...
    1, 500, [25, 50], fnTsGetVar('g_strctParadigm' ,'GroundtruthStimulusArea')); %Felix note: gets adjusted in Callbacks to avoid aliasing issues as it scales

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*1, ...
    'Bar Width', 'GroundtruthWidth', ...
    1, 50, [1, 10], fnTsGetVar('g_strctParadigm','GroundtruthWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*2, ...
    'Number of Bars', 'GroundtruthNumberOfBars', ...
    1, 16, [1, 1], fnTsGetVar('g_strctParadigm' ,'GroundtruthNumberOfBars'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*3, ...
%     'Bar Length', 'GroundtruthLength', ...
%     1, 100, [1, 10], fnTsGetVar('g_strctParadigm' ,'GroundtruthLength'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*3, ...     
    'Offset', 'GroundtruthOffset', ...     
    0, 10, [1, 2], fnTsGetVar('g_strctParadigm' ,'GroundtruthOffset'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*5, ...    
    'Stimulus On Time', 'GroundtruthStimulusOnTime', ...    
    10, 2000, [1, 2], fnTsGetVar('g_strctParadigm' ,'GroundtruthStimulusOnTime'));	

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*6, ...    
    'Stimulus Off Time', 'GroundtruthStimulusOffTime', ...    
    10, 2000, [1, 2], fnTsGetVar('g_strctParadigm' ,'GroundtruthStimulusOffTime'));

strctControllers.m_hSetGroundtruthCISonly = uicontrol('Parent',strctGroundtruthControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use CIS only','value',...
	g_strctParadigm.m_bGroundtruthCISonly,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''GroundtruthCISonly'');']);	

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctGroundtruthControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	

%{
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctCIHandmapperControllers.m_hPanel, 40+30*7, ...     
%     'Blur Steps', 'CIHandmapperBlurSteps', ...     
%     0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBlurSteps'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*7, ...     
%     'Range', 'CIHandmapperMoveDistance', ...     
%     0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'CIHandmapperMoveDistance'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*8, ...     
%     'Speed', 'CIHandmapperMoveSpeed', ...     
%     0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'CIHandmapperMoveSpeed'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*9, ...    
%     'Bar Red', 'CIHandmapperStimulusRed', ...    
%     0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusRed'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*10, ...
%     'Bar Green', 'CIHandmapperStimulusGreen', ...    
%     0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusGreen'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*11, ...
%     'Bar Blue', 'CIHandmapperStimulusBlue', ...    
%     0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperStimulusBlue'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*12, ...
%     'Background Red', 'CIHandmapperBackgroundRed', ...
%     0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBackgroundRed'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*13, ...
%     'Background Green', 'CIHandmapperBackgroundGreen', ...
%     0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBackgroundGreen'));
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGroundtruthControllers.m_hPanel, 40+30*14, ...
%     'Background Blue', 'CIHandmapperBackgroundBlue', ...
%     0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'CIHandmapperBackgroundBlue'));
% 
% strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctGroundtruthControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
%       'Position', [5 iPanelHeight-iOffset-360 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
% 
% strctControllers.m_hSetCycleStimulusOrientation = uicontrol('Parent',strctGroundtruthControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Orientation','value',...
% 	g_strctParadigm.m_bCycleStimulusOrientation,...
%     'Position', [5 iPanelHeight-iOffset-400 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleStimulusOrientation'');']);	
% 	
    %}
set(strctGroundtruthControllers.m_hPanel,'visible','off');

%% Dense Noise Variables

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*0, ...
    'Noise Stimulus Type', 'DensenoisePrimaryuseRGBCloud', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'DensenoisePrimaryuseRGBCloud'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*1, ...
    'Stimulus Area', 'DensenoiseStimulusArea', ...
    1, 500, [25, 50], fnTsGetVar('g_strctParadigm' ,'DensenoiseStimulusArea')); %Felix note: gets adjusted in Callbacks to avoid aliasing issues as it scales

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*2, ...
    'Cloud Scale', 'DensenoiseScale', ...
    1, 6, [1, 2], fnTsGetVar('g_strctParadigm','DensenoiseScale'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*4, ...
    'Bar Width', 'DensenoiseWidth', ...
    1, 100, [1, 10], fnTsGetVar('g_strctParadigm','DensenoiseWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*5, ...
    'Bar Length', 'DensenoiseLength', ...
    1, 100, [1, 10], fnTsGetVar('g_strctParadigm' ,'DensenoiseLength'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*6, ...
    'Bar Orientation', 'DensenoiseOrientation', ...
    0, 179, [15, 30], fnTsGetVar('g_strctParadigm' ,'DensenoiseOrientation'));

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDensenoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDensenoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Pregenerate Achromatic Clouds',...
      'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PregenACloudStimuli'');']);	

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDensenoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Pregenerate Chromatic Clouds',...
      'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PregenCCloudStimuli'');']);	

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDensenoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Pregenerate Bar Stimuli',...
      'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PregenBarStimuli'');']);	

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*8, ...    
    'Stimulus On Time', 'DensenoiseStimulusOnTime', ...    
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DensenoiseStimulusOnTime'));	

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDensenoiseControllers.m_hPanel, 40+30*9, ...    
    'Stimulus Off Time', 'DensenoiseStimulusOffTime', ...    
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DensenoiseStimulusOffTime'));

strctControllers.m_hSetContinuousDisplay = uicontrol('Parent',strctDensenoiseControllers.m_hPanel,'Style', 'checkbox', 'String', 'Continuous Stimulus','value',...
	fnTsGetVar('g_strctParadigm' ,'ContinuousDisplay'),...
    'Position', [5 iPanelHeight-iOffset-500 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ContinuousDisplay'');']);	

strctControllers.m_hSetContinuousDisplay = uicontrol('Parent',strctDensenoiseControllers.m_hPanel,'Style', 'checkbox', 'String', 'CSD Trigger frame','value',...
	fnTsGetVar('g_strctParadigm' ,'CSDtrigframe'),...
    'Position', [5 iPanelHeight-iOffset-520 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CSDtrigframe'');']);	


set(strctDensenoiseControllers.m_hPanel,'visible','off');

%% 1D Noise Variables

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*0, ...
    'Stimulus Type', 'OneDnoiseDistType', ...
    1, 2, [1, 1], fnTsGetVar('g_strctParadigm' ,'OneDnoiseDistType'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*1, ...
    'Stimulus Area', 'OneDnoiseStimulusArea', ...
    1, 500, [25, 50], fnTsGetVar('g_strctParadigm' ,'OneDnoiseStimulusArea')); %Felix note: gets adjusted in Callbacks to avoid aliasing issues as it scales

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*2, ...
    'Number of Bars', 'OneDnoiseNumberofBars', ...
    1, 50, [1, 10], fnTsGetVar('g_strctParadigm','OneDnoiseNumberofBars'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*3, ...
    'Orientation', 'OneDnoiseOrientation', ...
    1, 180, [5, 30], fnTsGetVar('g_strctParadigm','OneDnoiseOrientation'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*5, ...
%     'Bar Length', 'OneDnoiseLength', ...
%     1, 100, [1, 10], fnTsGetVar('g_strctParadigm' ,'OneDnoiseLength'));

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctOneDnoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	

% strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctOneDnoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Pregenerate Achromatic Clouds',...
%       'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PregenACloudStimuli'');']);	
% 
% strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctOneDnoiseControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Pregenerate Chromatic Clouds',...
%       'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PregenCCloudStimuli'');']);	

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*5, ...    
%     'Stimulus On Time', 'OneDnoiseStimulusOnTime', ...    
%     10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'OneDnoiseStimulusOnTime'));	
% 
% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctOneDnoiseControllers.m_hPanel, 40+30*6, ...    
%     'Stimulus Off Time', 'OneDnoiseStimulusOffTime', ...    
%     10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'OneDnoiseStimulusOffTime'));

set(strctOneDnoiseControllers.m_hPanel,'visible','off');

%% Disc Probe variables

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*0, ...
    'DiscProbeDiameter', 'DiscProbeDiameter', ...
    1, 100, [1, 10], fnTsGetVar('g_strctParadigm','DiscProbeDiameter'));
		
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*5, ...
    'On Time', 'DiscProbeStimulusOnTime', ...
    10, 2000, [10, 50], fnTsGetVar('g_strctParadigm' ,'DiscProbeStimulusOnTime'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*6, ...
    'Off Time', 'DiscProbeStimulusOffTime', ...
    10, 2000, [10, 50], fnTsGetVar('g_strctParadigm' ,'DiscProbeStimulusOffTime'));

% strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*5, ...
%     'Stimulus Area', 'DiscStimulusArea', ...
%     0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusArea'));


%{	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*8, ...
    'Disc Red', 'DiscStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*9, ...
    'Disc Green', 'DiscStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*10, ...
    'Disc Blue', 'DiscStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*11, ...
    'Background Red', 'DiscBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*12, ...
    'Background Green', 'DiscBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*13, ...
    'Background Blue', 'DiscBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscProbeControllers.m_hPanel, 40+30*14, ...
    'Stimulus Color', 'DiscStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'DiscStimulusPresetColor'));
%}
strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDiscProbeControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-200 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	  
strctControllers.m_hCycleColors = uicontrol('Parent',strctDiscProbeControllers.m_hPanel,'Style', 'checkbox', 'String', 'UseCenterSurroundProbe','value',...
	g_strctParadigm.m_bUseCenterSurroundProbe,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseCenterSurroundProbe'');']);	
  
% strctControllers.m_hCycleColors = uicontrol('Parent',strctDiscProbeControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Colors','value',...
% 	g_strctParadigm.m_bUseCalibratedColors,...
%     'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleColors'');']);	
% 	
% strctControllers.m_hUsePresetColors = uicontrol('Parent',strctDiscProbeControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Preset Colors','value',...
% 	g_strctParadigm.m_bUseDiscPresetColors,...
%     'Position', [5 iPanelHeight-iOffset-280 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseDiscPresetColors'');']);

	
set(strctDiscProbeControllers.m_hPanel,'visible','off');

%% Two Bar Variables
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*0, ...
    'Bar One Width', 'TwoBarWidthBarOne', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm','TwoBarWidthBarOne'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*1, ...
    'Bar One Length', 'TwoBarLengthBarOne', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'TwoBarLengthBarOne'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*2, ...
    'Bar Two Width', 'TwoBarWidthBarTwo', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm','TwoBarWidthBarTwo'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*3, ...
    'Bar Two Length', 'TwoBarLengthBarTwo', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'TwoBarLengthBarTwo'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*4, ...
    'Bar One Orientation', 'TwoBarOrientationBarOne', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarOrientationBarOne'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*5, ...
    'Bar Two Orientation', 'TwoBarOrientationBarTwo', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarOrientationBarTwo'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*6, ...
    'Bar One Blur', 'TwoBarBlurStepsBarOne', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarBlurStepsBarOne'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*7, ...
    'Bar Two Blur ', 'TwoBarBlurStepsBarTwo', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarBlurStepsBarTwo'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*8, ...
    'Range', 'TwoBarMoveDistance', ...
    0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'TwoBarMoveDistance'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*9, ...
    'Stimulus Area', 'TwoBarStimulusArea', ...
    0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusArea'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*10, ...
    'Stimulus On Time', 'TwoBarStimulusOnTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusOnTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*11, ...
    'Stimulus Off Time', 'TwoBarStimulusOffTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusOffTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*12, ...
    'Onset Delay', 'TwoBarStimulusOnsetDelay', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusOnsetDelay'));	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*13, ...
    'Minimum Offset', 'TwoBarMinOffset', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarMinOffset'));		
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*14, ...
    'Maximum Offset', 'TwoBarMaxOffset', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarMaxOffset'));	


strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*15, ...
    'Bar Red', 'TwoBarStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*16, ...
    'Bar Green', 'TwoBarStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*17, ...
    'Bar Blue', 'TwoBarStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*18, ...
    'Background Red', 'TwoBarBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'TwoBarBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*19, ...
    'Background Green', 'TwoBarBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'TwoBarBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*20, ...
    'Background Blue', 'TwoBarBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'TwoBarBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctTwoBarControllers.m_hPanel, 40+30*21, ...
    'Stimulus Color', 'TwoBarStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'TwoBarStimulusPresetColor'));

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctTwoBarControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	  
strctControllers.m_hSetRandomStimulusPosition = uicontrol('Parent',strctTwoBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Position','value',...
	g_strctParadigm.m_bRandomStimulusPosition,...
    'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusLocation'');']);
	
strctControllers.m_hSetRandomStimulusOrientation = uicontrol('Parent',strctTwoBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Orientation','value',...
	g_strctParadigm.m_bRandomStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandStimulusOrientation'');']);	

strctControllers.m_hSetCycleStimulusOrientation = uicontrol('Parent',strctTwoBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Orientation','value',...
	g_strctParadigm.m_bCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-360 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleStimulusOrientation'');']);	
	
strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctTwoBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Orientation','value',...
	g_strctParadigm.m_bReverseCycleStimulusOrientation,...
    'Position', [5 iPanelHeight-iOffset-380 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseCycleStimulusOrientation'');']);	

strctControllers.m_hSetDifferentColorsForDifferentStim = uicontrol('Parent',strctTwoBarControllers.m_hPanel,'Style', 'checkbox', 'String', 'Different Colors','value',...
	g_strctParadigm.m_strct2BarStimParams.m_bDifferentColorsForDifferentBars,...
    'Position', [5 iPanelHeight-iOffset-400 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetDifferentColorsForDifferentStim'');']);	
	
set(strctTwoBarControllers.m_hPanel,'visible','off');
	

	
%% Gabor Variables

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*0, ...
    'Gabor Width', 'GaborBarWidth', ...
    1, 1000, [1, 10], fnTsGetVar('g_strctParadigm','GaborBarWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*1, ...
    'Gabor Length', 'GaborBarLength', ...
    1, 1000, [1, 10], fnTsGetVar('g_strctParadigm' ,'GaborBarLength'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*2, ...
    'Orientation', 'GaborOrientation', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborOrientation'));



strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*3, ...
    'Gabor Phase', 'GaborPhase', ...
    0, 360, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborPhase'));
	

	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*4, ...
    'Gabor Frequency', 'GaborFreq', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborFreq'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*5, ...
    'Gabor Contrast', 'GaborContrast', ...
    0, 200, [1, 2], fnTsGetVar('g_strctParadigm','GaborContrast'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*6, ...
    'Gabor Sigma', 'GaborSigma', ...
    0, 200, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborSigma'));

	
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*7, ...
    'Gabor Size', 'GaborStimulusArea', ...
    0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborStimulusArea'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*8, ...
    'Speed', 'GaborMoveDistance', ...
    0, 1000, [1, 25], fnTsGetVar('g_strctParadigm' ,'GaborMoveDistance'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*9, ...
    'Stimulus Red', 'GaborStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*10, ...
    'Stimulus Green', 'GaborStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'GaborStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*11, ...
    'Stimulus Blue', 'GaborStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'GaborStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*12, ...
    'Background Red', 'GaborBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'GaborBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*13, ...
    'Background Green', 'GaborBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'GaborBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*14, ...
    'Background Blue', 'GaborBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'GaborBackgroundBlue'));


	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctGaborControllers.m_hPanel, 40+30*15, ...
    'Stimulus Color', 'GaborStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'GaborStimulusPresetColor'));
	

strctControllers.m_hSetReversePhaseDirection = uicontrol('Parent',strctGaborControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse','value',...
	g_strctParadigm.m_strctGaborParams.m_bReversePhaseDirection,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReversePhaseDirection'');']);
	
strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctGaborControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);
	
strctControllers.m_hUsePresetColors = uicontrol('Parent',strctGaborControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Preset Colors','value',...
	g_strctParadigm.m_bUseGaborPresetColors,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseGaborPresetColors'');']);
	
set(strctGaborControllers.m_hPanel,'visible','off');	
	
%% Disc Variables

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*0, ...
    'DiscDiameter', 'DiscDiameter', ...
    1, 1000, [1, 10], fnTsGetVar('g_strctParadigm','DiscDiameter'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*1, ...
    'Number of Discs', 'DiscNumberOfDiscs', ...
    1, 20, [1, 10], fnTsGetVar('g_strctParadigm','DiscNumberOfDiscs'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*2, ...
    'Orientation', 'DiscOrientation', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscOrientation'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*3, ...
    'Range', 'DiscMoveDistance', ...
    0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscMoveDistance'));	
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*4, ...
    'Speed', 'DiscMoveSpeed', ...
    0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscMoveSpeed'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*5, ...
    'Stimulus Area', 'DiscStimulusArea', ...
    0, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusArea'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*6, ...
    'Off Time', 'DiscStimulusOffTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusOffTime'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*7, ...
    'On Time', 'DiscStimulusOnTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusOnTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*8, ...
    'Disc Red', 'DiscStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*9, ...
    'Disc Green', 'DiscStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'DiscStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*10, ...
    'Disc Blue', 'DiscStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscStimulusBlue'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*11, ...
    'Background Red', 'DiscBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*12, ...
    'Background Green', 'DiscBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*13, ...
    'Background Blue', 'DiscBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'DiscBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctDiscControllers.m_hPanel, 40+30*14, ...
    'Stimulus Color', 'DiscStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'DiscStimulusPresetColor'));

strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctDiscControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-200 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	  
strctControllers.m_hSetRandomStimulusPosition = uicontrol('Parent',strctDiscControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Position','value',...
	g_strctParadigm.m_bRandomDiscStimulusPosition,...
    'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandDiscStimulusLocation'');']);
	
	strctControllers.m_hSetDiscRandomStimulusOrientation = uicontrol('Parent',strctDiscControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Orientation','value',...
		g_strctParadigm.m_strctHandMappingParameters.m_bDiscRandomStimulusOrientation,...
		'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''DiscRandStimulusOrientation'');']);	

strctControllers.m_hCycleColors = uicontrol('Parent',strctDiscControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Colors','value',...
	g_strctParadigm.m_bUseCalibratedColors,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleColors'');']);	
	
strctControllers.m_hUsePresetColors = uicontrol('Parent',strctDiscControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Preset Colors','value',...
	g_strctParadigm.m_bUseDiscPresetColors,...
    'Position', [5 iPanelHeight-iOffset-280 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseDiscPresetColors'');']);

	
set(strctDiscControllers.m_hPanel,'visible','off');
	

	






	

	
	
	
	

	
% Color Controls

[a2cCharMatrix, g_strctParadigm.m_strctMasterColorTableLookup] = fnStructToCharShort(g_strctParadigm.m_strctMasterColorTable);
strctControllers.m_hColorLists = uicontrol('Style', 'listbox', 'String', a2cCharMatrix,...
    'Position', [5 iPanelHeight-200 ,strctColorControllers.m_iPanelWidth-10 120], 'parent',strctColorControllers.m_hPanel, 'Callback',[g_strctParadigm.m_strCallbacks,'(''LoadColorList'');'],...
    'value',max(1,g_strctParadigm.m_iInitialIndexInColorList),'UIContextMenu',strctControllers.hColorListContextMenu, 'max',numel(g_strctParadigm.m_strctMasterColorTableLookup),...
    'min',1);
	
%[a2NewcCharMatrix, g_strctParadigm.m_strctMasterBackgroundTableLookup] = fnStructToCharShort(round(g_strctParadigm.m_strctMasterColorTable.gray.xyY(:,3)));
[a2NewcCharMatrix, g_strctParadigm.m_strctMasterBackgroundTableLookup] = fnStructToCharShort(g_strctParadigm.m_afBackgroundPresets);
%g_strctParadigm.m_strctMasterBackgroundTableLookup = strsplit(g_strctParadigm.m_strctMasterBackgroundTableLookup);
a2NewcCharMatrix = g_strctParadigm.m_cstrBackgroundLookup;
%g_strctParadigm.m_strctMasterBackgroundTableLookup = num2str(g_strctParadigm.m_cstrBackgroundLookup);

strctControllers.m_hBackgroundColors = uicontrol('Style', 'listbox', 'String', a2NewcCharMatrix,...
    'Position', [5 iPanelHeight-300 ,strctColorControllers.m_iPanelWidth-10 80], 'parent',strctColorControllers.m_hPanel, 'Callback',[g_strctParadigm.m_strCallbacks,'(''LoadBackgroundColor'');'],...
    'value',max(1,g_strctParadigm.m_iInitialIndexInColorList),'UIContextMenu',strctControllers.hColorListContextMenu, 'max',numel(g_strctParadigm.m_strctMasterBackgroundTableLookup),...
    'min',1);
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*8, ...
    'DKL Elevation', 'DKLElevation', ...
    -100, 100, [1, 1], fnTsGetVar('g_strctParadigm' ,'DKLElevation'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*9, ...
    'DKL Radius', 'DKLRadius', ...
    0, 100, [1, 1], fnTsGetVar('g_strctParadigm' ,'DKLRadius'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*10, ...
    'DKL Azimuth steps', 'DKLAzimuthSteps', ...
    1, 320, [1, 1], fnTsGetVar('g_strctParadigm' ,'DKLAzimuthSteps'));
%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*11, ...
    'Color Cycle Hz', 'ColorCycleRate', ...
    0, 80, [1, 1], fnTsGetVar('g_strctParadigm' ,'ColorCycleRate'));
	%}
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*11, ...
    'LM axis', 'CartesianXCoord', ...
    -1000, 1000, [1, 10], fnTsGetVar('g_strctParadigm' ,'CartesianXCoord'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*12, ...
    'S axis', 'CartesianYCoord', ...
    -1000, 1000, [1, 10], fnTsGetVar('g_strctParadigm' ,'CartesianYCoord'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*13, ...
    'LMS axis', 'CartesianZCoord', ...
    -1000, 1000, [1, 10], fnTsGetVar('g_strctParadigm' ,'CartesianZCoord'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*14, ...
    'Phase Shift Offset', 'ShiftOffsetDegrees', ...
    0, 360, [1, 10], fnTsGetVar('g_strctParadigm' ,'ShiftOffsetDegrees'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*15, ...
    'Hue Width', 'ManyBarHueFullWidth', ...
    0, 360, [1, 10], fnTsGetVar('g_strctParadigm' ,'ManyBarHueFullWidth'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*16, ...
    'Sat Width', 'ManyBarSatFullWidth', ...
    0, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'ManyBarSatFullWidth'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctColorControllers.m_hPanel, 40+30*17, ...
    'Lum Width', 'ManyBarLumFullWidth', ...
    0, 2, [1, 10], fnTsGetVar('g_strctParadigm' ,'ManyBarLumFullWidth'));
	
	
	
	
	
strctControllers.m_hUseSinePulses = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Sine Pulses','value',...
	g_strctParadigm.m_bUseGaussianPulses,...
    'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseSinePulses'');']);
	
strctControllers.m_hUseCartesianCoordinates = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use DKL Colors','value',...
	g_strctParadigm.m_bUseCartesianCoordinates,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseCartesianCoordinates'');']);
	
strctControllers.m_hTogglePhaseShiftOffset = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Shift Offset','value',...
	g_strctParadigm.m_bPhaseShiftOffset,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PhaseShiftOffset'');']);
	
strctControllers.m_hSetCycleColors = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle Colors','value',...
	g_strctParadigm.m_bCycleColors,...
    'Position', [5 iPanelHeight-iOffset-280 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''CycleColors'');']);	

strctControllers.m_hSetRandomColor = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Color','value',...
	g_strctParadigm.m_bRandomColor,...
    'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandomColorOrder'');']);	
	
strctControllers.m_hSetReverseColorOrder = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Color Order','value',...
	g_strctParadigm.m_bReverseColorOrder,...
    'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseColorOrder'');']);
	
strctControllers.m_hUseChosenBackgroundColor = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'User Background','value',...
	g_strctParadigm.m_bUseChosenBackgroundColor,...
    'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseChosenBackgroundColor'');']);
	
strctControllers.m_hFlipForegroundBackground = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Flip Background','value',...
	g_strctParadigm.m_bFlipForegroundBackground,...
    'Position', [5 iPanelHeight-iOffset-360 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''FlipForegroundBackground'');']);
	
	
	
	
strctControllers.m_hUpdateColorPicker = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Color Picker',...
    'Position', [5 iPanelHeight-iOffset-390 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateColorPicker'');']);	
	
strctControllers.m_hUseLUVCoordinates = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use LUV','value',...
	g_strctParadigm.m_bUseLUVCoordinates,...
    'Position', [5 iPanelHeight-iOffset-410 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseLUVCoordinates'');']);
	
%strctControllers.m_hColorText= uicontrol('Style', 'text', 'String', 'Color Saturations:',...
 %   'Position', [5 iPanelHeight-225 ,130 15], 'parent',strctColorControllers.m_hPanel,'HorizontalAlignment','left');


%{
strctControllers.m_hResetTuningPlot = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Reset Tuning Polar',...
    'Position', [5 iPanelHeight-iOffset-20 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ResetTuningPlot'');']);
	
strctControllers.m_hSetOrientationFunction = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Perform Orientation Test',...
    'Position', [5 iPanelHeight-iOffset-80 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PerformOrientationTuning'');']);
	
strctControllers.m_hSetTuningFunction = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Perform Color Test',...
      'Position', [5 iPanelHeight-iOffset-100 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PerformTuningFunction'');']);	

strctControllers.m_hSetTuningFunction = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Perform Position Test',...
      'Position', [5 iPanelHeight-iOffset-120 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''PerformPositionTuningFunction'');']);
	%}
%{	
strctControllers.m_hGenerateAFCTask = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Generate AFC Experiment',...
      'Position', [5 iPanelHeight-iOffset-120 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''GenerateAFCTask'');']);	
	%}  
	%{
strctControllers.m_hSetRandomColorOrder = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Randomize Color Order','value',...
	g_strctParadigm.m_bRandomColorOrder,...
    'Position', [5 iPanelHeight-iOffset-140 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandomColorOrder'');']);
	
strctControllers.m_hSetReverseColorOrder = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Color Order','value',...
	g_strctParadigm.m_bReverseColorOrder,...
    'Position', [5 iPanelHeight-iOffset-160 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseColorOrder'');']);

strctControllers.m_hSetRandomOrientationOrder = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Orientation Order','value',...
	g_strctParadigm.m_bRandomOrientation,...
    'Position', [5 iPanelHeight-iOffset-180 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandomOrientationOrder'');']);

strctControllers.m_hSetReverseOrientationOrder = uicontrol('Parent',strctColorControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Orientation Order','value',...
	g_strctParadigm.m_bReverseOrientationOrder,...
    'Position', [5 iPanelHeight-iOffset-200 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseOrientationOrder'');']);

strctControllers.m_hSetTuningFunction = uicontrol('Parent', strctColorControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Reset',...
      'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ResetHandMapper'');']);
	  %}

set(strctColorControllers.m_hPanel,'visible','off');
	
% MRI image panel
	
	
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*0, ...
    'Image width %', 'ImageWidth', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm','ImageWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*1, ...
    'Image height %', 'ImageLength', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'ImageLength'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*2, ...
    'Orientation', 'ImageOrientation', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'ImageOrientation'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*3, ...
    'Range', 'ImageMoveDistance', ...
    0, 1000, [1, 100], fnTsGetVar('g_strctParadigm' ,'ImageMoveDistance'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*4, ...
    'Speed', 'ImageMoveSpeed', ...
    0, 400, [1, 100], fnTsGetVar('g_strctParadigm' ,'ImageMoveSpeed'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*5, ...
    'On Time', 'ImageStimulusOnTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ImageStimulusOnTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*6, ...
    'Off Time', 'ImageStimulusOffTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'ImageStimulusOffTime'));

%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*5, ...
    'Blur Steps', 'ImageBlurSteps', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'ImageBlurSteps'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*6, ...
    'Bar Red', 'ImageStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'ImageStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*7, ...
    'Bar Green', 'ImageStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'ImageStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*8, ...
    'Bar Blue', 'ImageStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ImageStimulusBlue'));
%}
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*9, ...
    'Background Red', 'ImageBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ImageBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*10, ...
    'Background Green', 'ImageBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ImageBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*11, ...
    'Background Blue', 'ImageBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'ImageBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*12, ...
    'Stimulus Color', 'ImageStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'ImageStimulusPresetColor'));

	
strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctImageControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-200 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);
	%{
strctControllers.m_hLockImageAspectRatio = uicontrol('Parent', strctImageControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Lock Aspect Ratio',...
      'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''LockImageAspectRatio'');']);
	%}
strctControllers.m_hOverrideImageColors = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Override Image Color','value',...
	g_strctParadigm.m_strctMRIStim.m_bOverrideImageColors,...
    'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseCustomImageColors'');']);
	


strctControllers.m_hRandomImageDisplayOrder = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Order','value',...
	g_strctParadigm.m_strctMRIStim.m_bRandomOrder,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandomImageDisplayOrder'');']);
	
strctControllers.m_hReverseImageDisplayOrder = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Order','value',...
	g_strctParadigm.m_strctMRIStim.m_bReverseOrder,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseImageDisplayOrder'');']);
	
strctControllers.m_hLockImageAspectRatio = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Lock Aspect Ratio','value',...
	g_strctParadigm.m_strctMRIStim.m_bLockAspectRatio,...
    'Position', [5 iPanelHeight-iOffset-280 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''LockImageAspectRatio'');']);
	
strctControllers.m_hForceMatchImageSizes = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Force Image Size','value',...
	g_strctParadigm.m_strctMRIStim.m_bForceMatchImageSizes,...
    'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ForceMatchImageSizes'');']);
		
strctControllers.m_hMatchToMinimumImageSize = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Force Min Image Size','value',...
	g_strctParadigm.m_strctMRIStim.m_bMatchToMinimumImageSize,...
    'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''MatchToMinimumImageSize'');']);
		
strctControllers.m_hMatchToMaximumImageSize = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Force Max Image Size','value',...
	g_strctParadigm.m_strctMRIStim.m_bMatchToMaximumImageSize,...
    'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''MatchToMaximumImageSize'');']);
	

set(strctImageControllers.m_hPanel,'visible','off');
	
    
% Movie Control Panel
	
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*0, ...
    'Movie width %', 'MovieWidth', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm','MovieWidth'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*1, ...
    'Movie height %', 'MovieLength', ...
    1, 200, [1, 10], fnTsGetVar('g_strctParadigm' ,'MovieLength'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*2, ...
    'Orientation', 'MovieOrientation', ...
    0, 359, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovieOrientation'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*3, ...
    'Range', 'MovieMoveDistance', ...
    0, 1000, [1, 100], fnTsGetVar('g_strctParadigm' ,'MovieMoveDistance'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*4, ...
    'Speed', 'MovieMoveSpeed', ...
    0, 400, [1, 100], fnTsGetVar('g_strctParadigm' ,'MovieMoveSpeed'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*5, ...
    'On Time', 'MovieStimulusOnTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovieStimulusOnTime'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*6, ...
    'Off Time', 'MovieStimulusOffTime', ...
    10, 4096, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovieStimulusOffTime'));

%{
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*5, ...
    'Blur Steps', 'MovieBlurSteps', ...
    0, 100, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovieBlurSteps'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*6, ...
    'Bar Red', 'MovieStimulusRed', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovieStimulusRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*7, ...
    'Bar Green', 'MovieStimulusGreen', ...
    0, 255, [1, 2], fnTsGetVar('g_strctParadigm' ,'MovieStimulusGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*8, ...
    'Bar Blue', 'MovieStimulusBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovieStimulusBlue'));
%}
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*9, ...
    'Background Red', 'MovieBackgroundRed', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovieBackgroundRed'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*10, ...
    'Background Green', 'MovieBackgroundGreen', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovieBackgroundGreen'));

strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*11, ...
    'Background Blue', 'MovieBackgroundBlue', ...
    0, 255, [1, 5], fnTsGetVar('g_strctParadigm' ,'MovieBackgroundBlue'));
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctMovieControllers.m_hPanel, 40+30*12, ...
    'Stimulus Color', 'MovieStimulusPresetColor', ...
    1, 8, [1, 1], fnTsGetVar('g_strctParadigm' ,'MovieStimulusPresetColor'));

	
strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctMovieControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-200 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);

strctControllers.m_hLockMovieAspectRatio = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Override Movie Color','value',...
	g_strctParadigm.m_strctMovieStim.m_bOverrideMovieColors,...
    'Position', [5 iPanelHeight-iOffset-220 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UseCustomMovieColors'');']);
	
strctControllers.m_hLockMovieAspectRatio = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Lock Aspect Ratio','value',...
	g_strctParadigm.m_strctMovieStim.m_bLockAspectRatio,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''LockMovieAspectRatio'');']);

strctControllers.m_hRandomMovieDisplayOrder = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Order','value',...
	g_strctParadigm.m_strctMovieStim.m_bRandomOrder,...
    'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''RandomMovieDisplayOrder'');']);
	
strctControllers.m_hReverseMovieDisplayOrder = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Reverse Order','value',...
	g_strctParadigm.m_strctMovieStim.m_bReverseOrder,...
    'Position', [5 iPanelHeight-iOffset-280 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ReverseMovieDisplayOrder'');']);

strctControllers.m_hFitDisplayAreaToMovieSize = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Fit Display Area to Movie','value',...
	g_strctParadigm.m_strctMovieStim.m_bFitDisplayAreaToMovieSize,...
    'Position', [5 iPanelHeight-iOffset-300 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''FitDisplayAreaToMovieSize'');']);


strctControllers.m_hLoadOnTheFly = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Load on the Fly','value',...
	g_strctParadigm.m_strctMovieStim.m_bLoadOnTheFly,...
    'Position', [5 iPanelHeight-iOffset-320 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''LoadOnTheFly'');']);	

strctControllers.m_hContinueInMovieListWhenComplete = uicontrol('Parent',strctMovieControllers.m_hPanel,'Style', 'checkbox', 'String', 'Cycle to next list','value',...
	g_strctParadigm.m_strctMovieStim.m_bContinueInMovieListWhenComplete,...
    'Position', [5 iPanelHeight-iOffset-340 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ContinueInMovieListWhenComplete'');']);	
	
set(strctMovieControllers.m_hPanel,'visible','off');
	
    
	
	
	
	
%{
	  

	  
strctControllers.m_hClearCurrentTestObjects = uicontrol('Parent', strctImageControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Clear Test Variables',...
      'Position', [5 iPanelHeight-iOffset-120 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''ClearCurrentTestObjects'');']);	
	
strctControllers.m_hSetCurrentTestObject = uicontrol('Parent', strctImageControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Set Test Variable',...
      'Position', [5 iPanelHeight-iOffset-140 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetCurrentSelectedVariableAsTestObject'');']);
	
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*16, ...
    'Set Test Range', 'ImageCurrentVariableModifyRange', ...
    1, 200, [1, 1], fnTsGetVar('g_strctParadigm' ,'ImageCurrentVariableModifyRange'));
	  
strctControllers = fnAddTextSliderEditComboSmallWithCallback2(strctControllers,strctImageControllers.m_hPanel, 40+30*17, ...
    'Set Test Hz', 'ImageCurrentVariableModifySpeedHz', ...
    1, 200, [1, 1], fnTsGetVar('g_strctParadigm' ,'ImageCurrentVariableModifySpeedHz'));	  
	  
strctControllers.m_hSetReverseCycleStimulusOrientation = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Random Test Value','value',...
	g_strctParadigm.m_bRandomTestValue,...
    'Position', [5 iPanelHeight-iOffset-240 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''SetRandomTestValue'');']);	
	  
	  
  strctControllers.m_hUpdateStimulusPosition = uicontrol('Parent', strctImageControllers.m_hPanel, 'Style', 'pushbutton', 'String', 'Update Stimulus Location',...
      'Position', [5 iPanelHeight-iOffset-260 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UpdateStimulusPosition'');']);	
	  
	 	
strctControllers.m_hUseCalibratedColors = uicontrol('Parent',strctImageControllers.m_hPanel,'Style', 'checkbox', 'String', 'Use Preset Colors','value',...
	g_strctParadigm.m_bUsePlainBarPresetColors,...
    'Position', [5 iPanelHeight-iOffset-280 120 20], 'Callback', [g_strctParadigm.m_strCallbacks,'(''UsePlainBarPresetColors'');']); 
	%}


g_strctParadigm.m_strctControllers = strctControllers;

return;
